import{e as a,f as o}from"./Bkm6qw8b.js";const i=a("user",{state:()=>({user:null,loading:!1}),actions:{setUser(e){this.user=e},clearUser(){this.user=null,localStorage.removeItem("token"),localStorage.removeItem("user")},async loadUser(){const e=localStorage.getItem("token");if(!e||this.user)return;this.loading=!0;const{$api:r}=o();try{const t=await fetch(r.me(),{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},credentials:"include"});if(!t.ok)throw new Error("Gagal memuat data pengguna");const s=await t.json();this.setUser(s)}catch(t){console.error(t),this.clearUser()}finally{this.loading=!1}}}});export{i as u};

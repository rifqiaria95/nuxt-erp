import{_ as Ie,j as O,s as k,k as D,g as Ce,l as V,c as m,a as e,b as d,h as Ue,i as s,d as v,w as c,D as De,o as p,q as Te,v as $e,E as u,t as f,y as te,n as x,z as M,A as b,B as g,F as Ne,x as je,I as qe}from"./Bkm6qw8b.js";import{_ as Me}from"./mvyRji1Y.js";import{u as Re}from"./vvOl6aKk.js";import{u as Ae}from"./BRMs87XN.js";import{u as Fe}from"./DD8T_SWG.js";import{u as Le}from"./Bmp6y9tu.js";import{u as Be}from"./CGIrALZn.js";import{u as Ee}from"./WyHMcmGb.js";import{u as He}from"./B1HDS-e3.js";import{u as Je}from"./u26IMBn3.js";import{u as Qe}from"./VXGyPOT6.js";import{u as We}from"./Ca1Fz0tn.js";import{_ as ze}from"./BAMzpvu1.js";import{_ as Ge}from"./DleeVanq.js";import{C as h}from"./D9zIpW-x.js";import{u as Ye}from"./D29843uf.js";import{u as Ke}from"./CI-DMe-d.js";import"./BtuP6t-4.js";import"./9Qm2jZ7z.js";const Xe={class:"content-wrapper"},Ze={class:"container-xxl flex-grow-1 container-p-y"},et={class:"row g-6 mb-6"},tt={class:"col-xl-4 col-lg-6 col-md-6"},at={class:"card h-100"},st={class:"row h-100"},lt={class:"col-sm-7"},ot={class:"card-body text-sm-end text-center ps-sm-0"},dt={class:"row g-6"},rt={class:"col-12"},nt={class:"card"},it={class:"card-body"},ut={class:"row"},ct={class:"col-md-4"},mt={class:"col-md-4"},pt={class:"col-md-4"},ft={class:"col-12"},vt={class:"card"},bt={class:"card-header d-flex justify-content-between align-items-center flex-wrap"},gt={class:"d-flex align-items-center me-3 mb-2 mb-md-0"},ht={class:"d-flex align-items-center"},yt={class:"btn-group me-2"},_t={class:"dropdown-menu"},St={class:"input-group"},kt={class:"p-input-icon-left"},wt={class:"card-datatable table-responsive py-3 px-3"},Ot={key:0},xt=["href"],Vt={key:1},Pt={class:"d-inline-block"},It={class:"dropdown-menu"},Ct={key:0},Ut=["onClick"],Dt={key:1},Tt=["onClick"],$t={key:2},Nt=["onClick"],jt={key:3},qt=["onClick"],Mt={key:4},Rt=["onClick"],At={class:"tab-content pt-6"},Ft={class:"tab-pane fade active show",id:"form-tabs-info",role:"tabpanel"},Lt={class:"row g-4"},Bt={class:"col-md-12"},Et={class:"form-floating form-floating-outline"},Ht={class:"col-md-6"},Jt={class:"form-floating form-floating-outline"},Qt={class:"col-md-6"},Wt={class:"col-md-6"},zt={class:"form-floating form-floating-outline"},Gt={class:"col-md-6"},Yt={class:"form-floating form-floating-outline"},Kt={class:"col-md-6"},Xt={class:"form-floating form-floating-outline"},Zt={class:"col-md-6"},ea={class:"col-md-6"},ta={class:"col-md-6"},aa={class:"form-floating form-floating-outline"},sa={class:"col-md-3"},la={class:"form-floating form-floating-outline"},oa={class:"col-md-3"},da={class:"form-floating form-floating-outline"},ra={class:"col-md-6"},na={class:"form-floating form-floating-outline"},ia=["href"],ua={class:"col-md-12"},ca={class:"form-floating form-floating-outline"},ma={class:"tab-pane fade",id:"form-tabs-items",role:"tabpanel"},pa={class:"row g-3"},fa={class:"col-12"},va={class:"col-md-4"},ba={class:"col-md-2"},ga={class:"form-floating form-floating-outline"},ha=["onUpdate:modelValue","onInput"],ya={class:"col-md-3"},_a={class:"form-floating form-floating-outline"},Sa=["value"],ka={class:"col-md-3"},wa={class:"form-floating form-floating-outline"},Oa=["value"],xa={class:"col-md-6"},Va={class:"form-floating form-floating-outline"},Pa=["onUpdate:modelValue"],Ia={class:"col-md-3"},Ca={class:"form-floating form-floating-outline"},Ua=["value"],Da={class:"col-md-3 d-flex align-items-center"},Ta=["onClick"],$a={class:"mt-4"},Na={class:"d-flex justify-content-end mt-4"},ja={class:"fw-bold fs-5"},qa={class:"modal-footer mt-6"},Ma=["disabled"],Ra={key:0,class:"spinner-border spinner-border-sm","aria-hidden":"true"},Aa={__name:"sales-order",setup(Fa){const ae=qe(),se=De(),R=O(null),i=Re(),A=Ae(),F=Fe(),L=Ee(),B=Le(),E=Be(),T=He(),H=Je(),$=Ye(),{userHasPermission:P,userHasRole:I}=We(),J=Qe(),{salesOrders:le,loading:N,totalRecords:oe,params:y,form:o,isEditMode:C,showModal:de,validationErrors:re,customerProducts:Q}=k(i),{customers:W}=k(A),{perusahaans:ne}=k(F),{cabangs:z}=k(B),{warehouses:ie}=k(L),{products:La}=k(E),{user:Ba}=k(H),{permissions:Ea}=k(J),_=O({customerId:null,source:null,status:null,search:""}),j=O(""),S=O(null),ue=O([10,25,50,100]),ce=D(()=>C.value?"Edit Sales Order":"Tambah Sales Order"),me=D(()=>C.value?"Silakan ubah data Sales Order di bawah ini.":"Silakan isi form di bawah ini untuk menambahkan data Sales Order baru."),pe=D(()=>{if(!o.value||!o.value.salesOrderItems)return 0;const l=o.value.salesOrderItems.reduce((xe,ee)=>{const Ve=Number(ee.quantity)||0,Pe=Number(ee.price)||0;return xe+Ve*Pe},0),t=Number(o.value.discountPercent)||0,a=Number(o.value.taxPercent)||0,r=l*(t/100),n=l-r,U=n*(a/100);return n+U}),G=l=>!l||typeof l!="string"?null:l.startsWith("http")?l:`${(ae.public.apiBase||"").replace("/api","")}/${l}`,fe=[{label:"Cash",value:"cash"},{label:"Transfer",value:"transfer"},{label:"QRIS",value:"qris"},{label:"Card",value:"card"}],ve=O([{label:"POS",value:"pos"},{label:"Admin",value:"admin"}]),be=O([{label:"Draft",value:"draft"},{label:"Approved",value:"approved"},{label:"Delivered",value:"delivered"},{label:"Rejected",value:"rejected"},{label:"Partial",value:"partial"}]);let w=null;Ce(()=>{i.fetchSalesOrders(),A.fetchCustomers(),F.fetchPerusahaans(),B.fetchCabangs(),E.fetchProducts(),L.fetchWarehouses(),J.fetchPermissions(),H.loadUser();const l=document.getElementById("SalesOrderModal");l&&(w=new bootstrap.Modal(l))}),V(de,l=>{l?(w==null||w.show(),C.value?(o.value.attachment_url?S.value=o.value.attachment_url:o.value.attachment?S.value=G(o.value.attachment):S.value=null,o.value.salesOrderItems&&o.value.salesOrderItems.length>0&&o.value.salesOrderItems.forEach((t,a)=>{q(a)})):S.value=null):w==null||w.hide()}),V(()=>o.value.perusahaanId,l=>{l&&(C.value||(o.value.cabangId=null))}),V(()=>o.value.customerId,(l,t)=>{l&&t&&l!==t?(i.fetchProductsForCustomer(l),o.value.salesOrderItems=[],i.addItem()):l&&!t?i.fetchProductsForCustomer(l):l||(i.customerProducts=[],o.value.salesOrderItems=[],i.addItem())}),V(()=>i.customerProducts,l=>{o.value.salesOrderItems&&l&&o.value.salesOrderItems.forEach(t=>{l.some(r=>r.id===t.productId)||(t.productId=null,t.price=0,t.quantity=1,t.subtotal=0)})},{deep:!0});const ge=D(()=>!o.value.perusahaanId||!z.value?[]:z.value.filter(l=>l.perusahaanId===o.value.perusahaanId));V(j,Ke(l=>{_.value.search=l},500)),V(_,l=>{const{page:t,rows:a,...r}=l;i.setFilters(r)},{deep:!0});const he=l=>{y.value.first=l.first,i.fetchSalesOrders()},ye=()=>{y.value.first=0,i.fetchSalesOrders()},_e=l=>{y.value.sortField=l.sortField,y.value.sortOrder=l.sortOrder,i.fetchSalesOrders()},Y=l=>{l==="csv"&&R.value.exportCSV()};function Se(l){const t=l.target.files[0];t?(o.value.attachment=t,S.value=URL.createObjectURL(t)):(o.value.attachment=null,S.value=null)}const ke=l=>{const t=o.value.salesOrderItems[l].productId,a=Q.value.find(r=>r.id===t);if(a){const r=o.value.salesOrderItems[l];r.price=Number(a.priceSell)||0,K(l),q(l)}},we=l=>{K(l)},K=l=>{const t=o.value.salesOrderItems[l],a=Number(t.quantity)||0,r=Number(t.price)||0;t.subtotal=a*r},Oe=l=>{se.push({path:"/sales/sales-order-detail",query:{id:l}})},X=l=>{switch(l){case"draft":return{text:"Draft",class:"badge rounded-pill bg-label-secondary"};case"approved":return{text:"Approved",class:"badge rounded-pill bg-label-primary"};case"delivered":return{text:"Delivered",class:"badge rounded-pill bg-label-success"};case"rejected":return{text:"Rejected",class:"badge rounded-pill bg-label-danger"};case"partial":return{text:"Partial",class:"badge rounded-pill bg-label-warning"};default:return{text:"-",class:"badge rounded-pill bg-label-light"}}},Z=l=>{switch(l){case"cash":return{text:"Cash",class:"badge rounded-pill bg-label-success"};case"transfer":return{text:"Transfer",class:"badge rounded-pill bg-label-primary"};case"qris":return{text:"QRIS",class:"badge rounded-pill bg-label-danger"};case"card":return{text:"Card",class:"badge rounded-pill bg-label-secondary"};default:return{text:"-",class:"badge rounded-pill bg-label-light"}}},q=async l=>{const t=o.value.salesOrderItems[l];if(t.productId&&t.warehouseId)try{T.params.search="",T.params.rows=1;const a=await T.fetchStocksPaginated({productId:t.productId,warehouseId:t.warehouseId});a&&a.data&&a.data.length>0?t.stock=a.data[0]:t.stock={quantity:0}}catch(a){console.error("Failed to fetch stock info:",a),t.stock={quantity:0}}else t.stock={quantity:0}};return(l,t)=>(p(),m("div",Xe,[e("div",Ze,[t[54]||(t[54]=e("h4",{class:"mb-1"},"List Sales Order",-1)),t[55]||(t[55]=e("p",{class:"mb-6"}," List salesOrder yang terdaftar di sistem ",-1)),e("div",et,[t[27]||(t[27]=Ue('<div class="col-xl-4 col-lg-6 col-md-6" data-v-3fcb295f><div class="card" data-v-3fcb295f><div class="card-body" data-v-3fcb295f><div class="d-flex justify-content-between align-items-center mb-4" data-v-3fcb295f><h5 class="mb-1" data-v-3fcb295f>Total Orders</h5><span class="badge bg-label-primary rounded-pill" data-v-3fcb295f>Yearly</span></div><div class="d-flex align-items-center" data-v-3fcb295f><h1 class="mb-0 display-4" data-v-3fcb295f>15</h1><i class="ri-arrow-up-s-line ri-24px text-success" data-v-3fcb295f></i><span class="fw-medium text-success" data-v-3fcb295f>15.8%</span></div><p class="mb-0 mt-2" data-v-3fcb295f>Analytics for last year</p></div></div></div><div class="col-xl-4 col-lg-6 col-md-6" data-v-3fcb295f><div class="card" data-v-3fcb295f><div class="card-body" data-v-3fcb295f><div class="d-flex justify-content-between align-items-center mb-4" data-v-3fcb295f><h5 class="mb-1" data-v-3fcb295f>Pending Orders</h5><span class="badge bg-label-warning rounded-pill" data-v-3fcb295f>Weekly</span></div><div class="d-flex align-items-center" data-v-3fcb295f><h1 class="mb-0 display-4" data-v-3fcb295f>5</h1><i class="ri-arrow-down-s-line ri-24px text-danger" data-v-3fcb295f></i><span class="fw-medium text-danger" data-v-3fcb295f>8.2%</span></div><p class="mb-0 mt-2" data-v-3fcb295f>Analytics for last week</p></div></div></div>',2)),e("div",tt,[e("div",at,[e("div",st,[t[26]||(t[26]=e("div",{class:"col-sm-5"},[e("div",{class:"d-flex align-items-end h-100 justify-content-center"},[e("img",{src:Me,class:"img-fluid",alt:"Image",width:"70"})])],-1)),e("div",lt,[e("div",ot,[e("button",{onClick:t[0]||(t[0]=a=>s(i).openModal(null,"admin")),class:"btn btn-primary mb-2 text-wrap add-new-role"}," Tambah Sales Order "),t[25]||(t[25]=e("p",{class:"mb-0 mt-1"},"Buat Sales Order baru",-1))])])])])])]),e("div",dt,[t[37]||(t[37]=e("div",{class:"col-12"},[e("h4",{class:"mt-6 mb-1"},"Total & Filter Sales Order"),e("p",{class:"mb-0"},"Temukan semua akun administrator perusahaan Anda dan Sales Order terkait.")],-1)),e("div",rt,[e("div",nt,[e("div",it,[e("div",ut,[e("div",ct,[d(s(h),{modelValue:_.value.customerId,"onUpdate:modelValue":t[1]||(t[1]=a=>_.value.customerId=a),options:s(W),label:"name",reduce:a=>a.id,placeholder:"Pilih Customer",class:"v-select-style"},null,8,["modelValue","options","reduce"])]),e("div",mt,[d(s(h),{modelValue:_.value.source,"onUpdate:modelValue":t[2]||(t[2]=a=>_.value.source=a),options:ve.value,label:"label",reduce:a=>a.value,placeholder:"Pilih Source",class:"v-select-style"},null,8,["modelValue","options","reduce"])]),e("div",pt,[d(s(h),{modelValue:_.value.status,"onUpdate:modelValue":t[3]||(t[3]=a=>_.value.status=a),options:be.value,label:"label",reduce:a=>a.value,placeholder:"Pilih Status",class:"v-select-style"},null,8,["modelValue","options","reduce"])])])])])]),e("div",ft,[e("div",vt,[e("div",bt,[e("div",gt,[t[28]||(t[28]=e("span",{class:"me-2"},"Baris:",-1)),d(s(Te),{modelValue:s(y).rows,"onUpdate:modelValue":t[4]||(t[4]=a=>s(y).rows=a),options:ue.value,onChange:ye,placeholder:"Jumlah",style:{width:"8rem"}},null,8,["modelValue","options"])]),e("div",ht,[e("div",yt,[t[29]||(t[29]=e("button",{class:"btn btn-secondary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("i",{class:"ri-upload-2-line me-1"}),v(" Export ")],-1)),e("ul",_t,[e("li",null,[e("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:t[5]||(t[5]=a=>Y("csv"))},"CSV")]),e("li",null,[e("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:t[6]||(t[6]=a=>Y("pdf"))},"PDF")])])]),e("div",St,[e("span",kt,[d(s($e),{modelValue:j.value,"onUpdate:modelValue":t[7]||(t[7]=a=>j.value=a),placeholder:"Cari Sales Order...",class:"w-full md:w-20rem"},null,8,["modelValue"])])])])]),e("div",wt,[d(Ge,{ref_key:"myDataTableRef",ref:R,data:s(le),rows:s(y).rows,loading:s(N),totalRecords:s(oe),lazy:!0,onPage:t[8]||(t[8]=a=>he(a)),onSort:t[9]||(t[9]=a=>_e(a)),responsiveLayout:"scroll",paginatorPosition:"bottom",paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink",currentPageReportTemplate:"Menampilkan {first} sampai {last} dari {totalRecords} data"},{default:c(()=>[d(s(u),{header:"#",sortable:!1},{body:c(a=>[v(f(s(y).first+a.index+1),1)]),_:1}),d(s(u),{field:"noSo",header:"No. SO",sortable:!0},{body:c(a=>[e("span",null,f(a.data.noSo||"-"),1)]),_:1}),d(s(u),{field:"noPo",header:"No. PO",sortable:!0},{body:c(a=>[e("span",null,f(a.data.noPo||"-"),1)]),_:1}),d(s(u),{field:"customer.name",header:"Nama Customer",sortable:!0}),d(s(u),{field:"paymentMethod",header:"Metode Pembayaran",sortable:!0},{body:c(a=>[e("span",{class:te(Z(a.data.paymentMethod).class)},f(Z(a.data.paymentMethod).text),3)]),_:1}),d(s(u),{field:"source",header:"Source",sortable:!0},{body:c(a=>[e("span",null,f(a.data.source||"-"),1)]),_:1}),d(s(u),{field:"status",header:"Status SO",sortable:!0},{body:c(a=>[e("span",{class:te(X(a.data.status).class)},f(X(a.data.status).text),3)]),_:1}),d(s(u),{field:"createdByUser.fullName",header:"Dibuat Oleh",sortable:!0},{body:c(a=>{var r;return[e("span",null,f(((r=a.data.createdByUser)==null?void 0:r.fullName)||"-"),1)]}),_:1}),d(s(u),{field:"approvedByUser.fullName",header:"Approved By",sortable:!0},{body:c(a=>{var r;return[e("span",null,f(((r=a.data.approvedByUser)==null?void 0:r.fullName)||"-"),1)]}),_:1}),d(s(u),{field:"up",header:"Untuk Perhatian",sortable:!0}),d(s(u),{field:"date",header:"Tanggal SO",sortable:!0},{body:c(a=>[v(f(a.data.date?new Date(a.data.date).toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric"}):"-"),1)]),_:1}),d(s(u),{field:"dueDate",header:"Jatuh Tempo SO",sortable:!0},{body:c(a=>[v(f(a.data.dueDate?new Date(a.data.dueDate).toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric"}):"-"),1)]),_:1}),d(s(u),{field:"perusahaan.nmPerusahaan",header:"Perusahaan",sortable:!0}),d(s(u),{field:"cabang.nmCabang",header:"Cabang",sortable:!0}),d(s(u),{field:"attachment",header:"Nama File",sortable:!0},{body:c(a=>[a.data.attachment?(p(),m("div",Ot,[e("a",{href:G(a.data.attachment),target:"_blank",rel:"noopener noreferrer",style:{"text-decoration":"underline",color:"#007bff"}},f(a.data.attachment.split("/").pop()),9,xt)])):(p(),m("div",Vt,t[30]||(t[30]=[e("span",{class:"text-muted"},"Tidak ada file",-1)])))]),_:1}),d(s(u),{header:"Actions",exportable:!1,style:{"min-width":"8rem"}},{body:c(a=>[e("div",Pt,[t[36]||(t[36]=e("a",{href:"javascript:;",class:"btn btn-sm btn-text-secondary rounded-pill btn-icon dropdown-toggle hide-arrow","data-bs-toggle":"dropdown"},[e("i",{class:"ri-more-2-fill"})],-1)),e("ul",It,[s(P)("approve_purchase_order")&&a.data.status=="draft"?(p(),m("li",Ct,[e("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:r=>s(i).approveSalesOrder(a.data.id)},t[31]||(t[31]=[e("i",{class:"ri-check-line me-2"},null,-1),v(" Approve ")]),8,Ut)])):x("",!0),s(I)("superadmin")||s(P)("reject_sales_order")&&a.data.status=="draft"?(p(),m("li",Dt,[e("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:r=>s(i).rejectSalesOrder(a.data.id)},t[32]||(t[32]=[e("i",{class:"ri-close-line me-2"},null,-1),v(" Reject ")]),8,Tt)])):x("",!0),s(I)("superadmin")||s(P)("view_sales_order")&&(a.data.status=="approved"||a.data.status=="partial"||a.data.status=="partial")?(p(),m("li",$t,[e("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:r=>Oe(a.data.id)},t[33]||(t[33]=[e("i",{class:"ri-eye-line me-2"},null,-1),v(" Lihat Detail ")]),8,Nt)])):x("",!0),s(I)("superadmin")||s(P)("edit_sales_order")&&a.data.status=="draft"?(p(),m("li",jt,[e("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:r=>s(i).openModal(a.data,"admin")},t[34]||(t[34]=[e("i",{class:"ri-edit-box-line me-2"},null,-1),v(" Edit ")]),8,qt)])):x("",!0),s(I)("superadmin")||s(P)("delete_sales_order")?(p(),m("li",Mt,[e("a",{class:"dropdown-item text-danger",href:"javascript:void(0)",onClick:r=>s(i).deleteSalesOrder(a.data.id)},t[35]||(t[35]=[e("i",{class:"ri-delete-bin-7-line me-2"},null,-1),v(" Hapus ")]),8,Rt)])):x("",!0)])])]),_:1})]),_:1},8,["data","rows","loading","totalRecords"])])])])]),d(ze,{id:"SalesOrderModal",title:ce.value,description:me.value,"validation-errors-from-parent":s(re)},{default:c(()=>[e("form",{onSubmit:t[24]||(t[24]=M(a=>s(i).saveSalesOrder(),["prevent"]))},[t[53]||(t[53]=e("div",{class:"row"},[e("div",{class:"col"},[e("ul",{class:"nav nav-tabs",role:"tablist"},[e("li",{class:"nav-item"},[e("button",{class:"nav-link active","data-bs-toggle":"tab","data-bs-target":"#form-tabs-info",role:"tab","aria-selected":"true",type:"button"},[e("span",{class:"ri-user-line ri-20px d-sm-none"}),e("span",{class:"d-none d-sm-block"},"Informasi Sales Order")])]),e("li",{class:"nav-item"},[e("button",{class:"nav-link","data-bs-toggle":"tab","data-bs-target":"#form-tabs-items",role:"tab","aria-selected":"false",type:"button"},[e("span",{class:"ri-folder-user-line ri-20px d-sm-none"}),e("span",{class:"d-none d-sm-block"},"List Product")])])])])],-1)),e("div",At,[e("div",Ft,[e("div",Lt,[e("div",Bt,[e("div",Et,[b(e("input",{type:"hidden","onUpdate:modelValue":t[10]||(t[10]=a=>s(o).noSo=a),class:"form-control",placeholder:"No SO",required:""},null,512),[[g,s(o).noSo]])])]),e("div",Ht,[e("div",Jt,[b(e("input",{type:"text","onUpdate:modelValue":t[11]||(t[11]=a=>s(o).noPo=a),class:"form-control",placeholder:"No. PO",required:""},null,512),[[g,s(o).noPo]]),t[38]||(t[38]=e("label",null,"No. PO",-1))])]),e("div",Qt,[d(s(h),{modelValue:s(o).customerId,"onUpdate:modelValue":t[12]||(t[12]=a=>s(o).customerId=a),options:s(W),label:"name",reduce:a=>a.id,placeholder:"Pilih Customer",class:"v-select-style"},null,8,["modelValue","options","reduce"])]),e("div",Wt,[e("div",zt,[b(e("input",{type:"text","onUpdate:modelValue":t[13]||(t[13]=a=>s(o).up=a),class:"form-control",placeholder:"Untuk Perhatian",required:""},null,512),[[g,s(o).up]]),t[39]||(t[39]=e("label",null,"Untuk Perhatian",-1))])]),e("div",Gt,[e("div",Yt,[b(e("input",{type:"date","onUpdate:modelValue":t[14]||(t[14]=a=>s(o).date=a),class:"form-control",required:""},null,512),[[g,s(o).date]]),t[40]||(t[40]=e("label",null,"Tanggal SO",-1))])]),e("div",Kt,[e("div",Xt,[b(e("input",{type:"date","onUpdate:modelValue":t[15]||(t[15]=a=>s(o).dueDate=a),class:"form-control",required:""},null,512),[[g,s(o).dueDate]]),t[41]||(t[41]=e("label",null,"Jatuh Tempo SO",-1))])]),e("div",Zt,[d(s(h),{modelValue:s(o).perusahaanId,"onUpdate:modelValue":t[16]||(t[16]=a=>s(o).perusahaanId=a),options:s(ne),label:"nmPerusahaan",reduce:a=>a.id,placeholder:"Pilih Perusahaan",class:"v-select-style"},null,8,["modelValue","options","reduce"])]),e("div",ea,[d(s(h),{modelValue:s(o).cabangId,"onUpdate:modelValue":t[17]||(t[17]=a=>s(o).cabangId=a),options:ge.value,label:"nmCabang",reduce:a=>a.id,placeholder:"Pilih Cabang",class:"v-select-style"},null,8,["modelValue","options","reduce"])]),e("div",ta,[e("div",aa,[d(s(h),{modelValue:s(o).paymentMethod,"onUpdate:modelValue":t[18]||(t[18]=a=>s(o).paymentMethod=a),options:fe,label:"label",reduce:a=>a.value,"get-option-key":a=>a.value,placeholder:"-- Pilih Metode Pembayaran --",id:"select-payment-method",class:"select-payment-method"},null,8,["modelValue","reduce","get-option-key"])])]),e("div",sa,[e("div",la,[b(e("input",{type:"number","onUpdate:modelValue":t[19]||(t[19]=a=>s(o).discountPercent=a),class:"form-control",placeholder:"Discount (%)"},null,512),[[g,s(o).discountPercent]]),t[42]||(t[42]=e("label",null,"Discount SO (%)",-1))])]),e("div",oa,[e("div",da,[b(e("input",{type:"number","onUpdate:modelValue":t[20]||(t[20]=a=>s(o).taxPercent=a),class:"form-control",placeholder:"Tax (%)"},null,512),[[g,s(o).taxPercent]]),t[43]||(t[43]=e("label",null,"Tax SO (%)",-1))])]),e("div",ra,[e("div",na,[e("input",{type:"file",onChange:Se,class:"form-control"},null,32),t[44]||(t[44]=e("label",null,"Attachment SO",-1)),S.value?(p(),m("a",{key:0,href:S.value,target:"_blank",class:"d-block mt-1"},"Lihat Attachment",8,ia)):x("",!0)])]),e("div",ua,[e("div",ca,[b(e("textarea",{"onUpdate:modelValue":t[21]||(t[21]=a=>s(o).description=a),class:"form-control",placeholder:"Deskripsi SO"},null,512),[[g,s(o).description]]),t[45]||(t[45]=e("label",null,"Deskripsi SO",-1))])])])]),e("div",ma,[(p(!0),m(Ne,null,je(s(o).salesOrderItems,(a,r)=>(p(),m("div",{key:r,class:"repeater-item mb-4"},[e("div",pa,[e("div",fa,[d(s(h),{modelValue:a.warehouseId,"onUpdate:modelValue":[n=>a.warehouseId=n,n=>q(r)],options:s(ie),"get-option-label":n=>`${n.name} (${n.code})`,reduce:n=>n.id,placeholder:"Pilih Gudang SO",class:"v-select-style"},null,8,["modelValue","onUpdate:modelValue","options","get-option-label","reduce"])]),e("div",va,[d(s(h),{modelValue:a.productId,"onUpdate:modelValue":[n=>a.productId=n,n=>ke(r)],options:s(Q),"get-option-label":n=>{var U;return`${n.name} (${(U=n.unit)==null?void 0:U.name})`},reduce:n=>n.id,placeholder:"Pilih Produk",class:"v-select-style"},null,8,["modelValue","onUpdate:modelValue","options","get-option-label","reduce"])]),e("div",ba,[e("div",ga,[b(e("input",{type:"number","onUpdate:modelValue":n=>a.quantity=n,onInput:n=>we(r),class:"form-control",placeholder:"Qty"},null,40,ha),[[g,a.quantity,void 0,{number:!0}]]),t[46]||(t[46]=e("label",null,"Jumlah SO",-1))])]),e("div",ya,[e("div",_a,[e("input",{type:"text",value:s($)(a.price),class:"form-control",placeholder:"Harga",readonly:""},null,8,Sa),t[47]||(t[47]=e("label",null,"Harga SO",-1))])]),e("div",ka,[e("div",wa,[e("input",{type:"text",value:s($)(a.subtotal),class:"form-control",placeholder:"Subtotal",readonly:""},null,8,Oa),t[48]||(t[48]=e("label",null,"Subtotal SO",-1))])]),e("div",xa,[e("div",Va,[b(e("input",{type:"text","onUpdate:modelValue":n=>a.description=n,class:"form-control",placeholder:"Deskripsi item"},null,8,Pa),[[g,a.description]]),t[49]||(t[49]=e("label",null,"Deskripsi SO",-1))])]),e("div",Ia,[e("div",Ca,[e("input",{type:"text",value:a.stock&&a.stock.quantity!==void 0&&a.stock.quantity!==null?Math.floor(a.stock.quantity):"",class:"form-control",placeholder:"Stock",readonly:""},null,8,Ua),t[50]||(t[50]=e("label",null,"Stock",-1))])]),e("div",Da,[e("button",{onClick:M(n=>s(i).removeItem(r),["prevent"]),class:"btn btn-outline-danger w-100"},"Hapus",8,Ta)])]),t[51]||(t[51]=e("hr",{class:"my-4"},null,-1))]))),128)),e("div",$a,[e("button",{onClick:t[22]||(t[22]=M(a=>s(i).addItem(),["prevent"])),class:"btn btn-primary"},"Tambah Item")]),e("div",Na,[e("span",ja,"Grand Total: "+f(s($)(pe.value)),1)])])]),e("div",qa,[e("button",{type:"button",class:"btn btn-outline-secondary",onClick:t[23]||(t[23]=a=>s(i).closeModal())},"Tutup"),e("button",{type:"submit",class:"btn btn-primary",disabled:s(N)},[s(N)?(p(),m("span",Ra)):x("",!0),t[52]||(t[52]=v(" Simpan "))],8,Ma)])],32)]),_:1},8,["title","description","validation-errors-from-parent"])]),t[56]||(t[56]=e("div",{class:"content-backdrop fade"},null,-1))]))}},is=Ie(Aa,[["__scopeId","data-v-3fcb295f"]]);export{is as default};

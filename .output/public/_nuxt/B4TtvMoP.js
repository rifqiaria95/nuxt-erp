import{_ as w,s as P,O as D,k as I,g as k,c as i,a,i as s,F as y,h as f,t as d,x as C,o as r,A as S,B as O}from"./Bkm6qw8b.js";import{_ as T}from"./DjQry-0W.js";import{u as N}from"./DmOfb4yy.js";import{S as h}from"./9Qm2jZ7z.js";import{u as A}from"./D29843uf.js";import"./BtuP6t-4.js";import"./u26IMBn3.js";const B={class:"content-wrapper"},j={class:"container-xxl flex-grow-1 container-p-y"},q={key:0,class:"text-center"},F={class:"row invoice-preview"},M={class:"col-xl-9 col-md-8 col-12 mb-md-0 mb-6"},Q={class:"card invoice-preview-card p-sm-12 p-6"},V={class:"card-body invoice-preview-header rounded-4 p-6"},R={class:"d-flex justify-content-between flex-xl-row flex-md-column flex-sm-row flex-column text-heading align-items-xl-center align-items-md-start align-items-sm-center flex-wrap gap-6"},$={class:"mb-1"},L={class:"mb-1"},G={class:"mb-0"},U={class:"mb-6"},E={class:"mb-1"},W={class:"card-body py-6 px-0"},J={class:"d-flex justify-content-between flex-wrap gap-6"},X={class:"mb-1"},z={class:"mb-1"},H={class:"mb-1"},K={class:"mb-1"},Y={class:"mb-0"},Z={class:"mb-1"},aa={class:"mb-1"},ta={class:"table-responsive border rounded-4 border-bottom-0"},ea={class:"table m-0"},sa={class:"text-nowrap text-heading"},da={class:"text-nowrap"},oa=["onUpdate:modelValue","onInput","disabled"],na={class:"switch switch-success"},la=["checked","onChange"],ia={class:"switch-label"},ra={class:"table-responsive"},ca={class:"table m-0 table-borderless"},ba={class:"align-top px-0 py-6"},ua={class:"mb-1"},va={class:"text-end px-0 py-6 w-px-100"},pa={class:"fw-medium mb-1"},ma={class:"fw-medium mb-1"},fa={class:"fw-medium mb-1 border-bottom pb-2"},ha={class:"fw-medium mb-0 pt-2"},ya={class:"card-body p-0"},ga={class:"row"},xa={class:"col-12"},_a={key:2,class:"text-center"},wa={__name:"purchase-order-detail",setup(Pa){const u=N(),g=D(),c=A(),{purchaseOrder:e,loading:v}=P(u),p=g.query.id;async function b(){const n=Array.isArray(p)?p[0]:p;if(typeof n=="string"){v.value=!0;try{await u.getPurchaseOrderDetails(n)}catch(t){console.error("Failed to refresh PO details:",t)}finally{v.value=!1}}}async function x(n,t,o){const l=e.value.purchaseOrderItems.find(m=>m.id===n);if(!l){console.error("Item not found!");return}if(t&&(o==0||o==null)){h.fire({icon:"error",title:"Validasi Gagal",text:"Jumlah yang diterima tidak boleh 0!"}),await b();return}if(o>l.quantity){h.fire({icon:"error",title:"Validasi Gagal",text:"Quantity yang diterima tidak boleh melebihi quantity yang dipesan!"}),await b();return}try{await u.updateStatusPartial(n,t,o),await b()}catch(m){console.error("Failed to update status:",m),h.fire({icon:"error",title:"Update Gagal",text:"Terjadi kesalahan saat memperbarui status item."})}}const _=I(()=>{if(e.value&&e.value.purchaseOrderItems){const n=e.value.purchaseOrderItems.reduce((o,l)=>o+Number(l.quantity)*Number(l.price),0),t=n*(Number(e.value.discountPercent)/100);return n-t}return 0});return k(b),(n,t)=>(r(),i("div",B,[a("div",j,[s(v)?(r(),i("div",q,t[0]||(t[0]=[a("div",{class:"spinner-border",role:"status"},[a("span",{class:"visually-hidden"},"Loading...")],-1)]))):s(e)?(r(),i(y,{key:1},[a("div",F,[a("div",M,[a("div",Q,[a("div",V,[a("div",R,[a("div",null,[t[1]||(t[1]=a("div",{class:"d-flex svg-illustration align-items-center gap-2 mb-6"},[a("span",{class:"app-brand-logo demo"},[a("span",{style:{color:"var(--bs-primary)"}},[a("img",{src:T,alt:"logo",width:"200"})])])],-1)),a("p",$,d(s(e).perusahaan.alamatPerusahaan),1),a("p",L,d(s(e).perusahaan.kodePerusahaan),1),a("p",G,d(s(e).perusahaan.npwpPerusahaan),1)]),a("div",null,[a("h5",U,"Purchase Number : "+d(s(e).noPo),1),a("div",E,[t[2]||(t[2]=a("span",null,"Date Issues: ",-1)),a("span",null,d(new Date(s(e).date).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})),1)]),a("div",null,[t[3]||(t[3]=a("span",null,"Date Due: ",-1)),a("span",null,d(new Date(s(e).dueDate).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})),1)])])])]),a("div",W,[a("div",J,[a("div",null,[t[4]||(t[4]=a("h6",null,"Invoice To:",-1)),a("p",X,d(s(e).up),1),a("p",z,d(s(e).vendor.name),1),a("p",H,d(s(e).vendor.address),1),a("p",K,d(s(e).vendor.phone),1),a("p",Y,d(s(e).vendor.email),1)]),a("div",null,[t[5]||(t[5]=a("h6",null,"Bill To:",-1)),a("p",Z,d(s(e).perusahaan.nmPerusahaan),1),a("p",aa,d(s(e).perusahaan.alamatPerusahaan),1)])])]),a("div",ta,[a("table",ea,[t[7]||(t[7]=a("thead",null,[a("tr",null,[a("th",null,"Item"),a("th",null,"Description"),a("th",null,"Cost"),a("th",null,"Qty"),a("th",null,"Received Qty"),a("th",null,"Price"),a("th",null,"Status")])],-1)),a("tbody",null,[(r(!0),i(y,null,C(s(e).purchaseOrderItems,o=>(r(),i("tr",{key:o.id},[a("td",sa,d(o.product.name),1),a("td",da,d(o.description),1),a("td",null,d(s(c)(o.price)),1),a("td",null,d(Math.floor(Number(o.quantity)||0)),1),a("td",null,[S(a("input",{type:"number",class:"form-control","onUpdate:modelValue":l=>o.receivedQty=l,onInput:l=>o.receivedQty=Math.floor(Number(o.receivedQty)||0),style:{width:"80px"},disabled:o.statusPartial},null,40,oa),[[O,o.receivedQty]])]),a("td",null,d(s(c)(Number(o.price)*Number(o.quantity))),1),a("td",null,[a("label",na,[a("input",{type:"checkbox",class:"switch-input",checked:o.statusPartial,onChange:l=>x(o.id,!o.statusPartial,o.receivedQty)},null,40,la),t[6]||(t[6]=f('<span class="switch-toggle-slider" data-v-dd6b0322><span class="switch-on" data-v-dd6b0322><i class="ri-check-line" data-v-dd6b0322></i></span><span class="switch-off" data-v-dd6b0322><i class="ri-close-line" data-v-dd6b0322></i></span></span>',1)),a("span",ia,d(o.statusPartial?"Done":"Pending"),1)])])]))),128))])])]),a("div",ra,[a("table",ca,[a("tbody",null,[a("tr",null,[a("td",ba,[a("p",ua,[t[8]||(t[8]=a("span",{class:"me-2 fw-medium text-heading"},"Created by:",-1)),a("span",null,d(s(e).createdBy),1)]),t[9]||(t[9]=a("span",null,"Thanks for your business",-1))]),t[10]||(t[10]=a("td",{class:"pe-0 py-6 w-px-100"},[a("p",{class:"mb-1"},"Discount:"),a("p",{class:"mb-1"},"Subtotal:"),a("p",{class:"mb-1 border-bottom pb-2"},"Tax:"),a("p",{class:"mb-0 pt-2"},"Total:")],-1)),a("td",va,[a("p",pa,d(s(e).discountPercent)+"%",1),a("p",ma,d(s(c)(_.value)),1),a("p",fa,d(s(e).taxPercent)+"%",1),a("p",ha,d(s(c)(s(e).total)),1)])])])])]),t[12]||(t[12]=a("hr",{class:"mt-0 mb-6"},null,-1)),a("div",ya,[a("div",ga,[a("div",xa,[t[11]||(t[11]=a("span",{class:"fw-medium text-heading"},"Note: ",-1)),a("span",null,d(s(e).description),1)])])])])]),t[13]||(t[13]=f('<div class="col-xl-3 col-md-4 col-12 invoice-actions" data-v-dd6b0322><div class="card" data-v-dd6b0322><div class="card-body" data-v-dd6b0322><button class="btn btn-primary d-grid w-100 mb-4" data-bs-toggle="offcanvas" data-bs-target="#sendInvoiceOffcanvas" data-v-dd6b0322><span class="d-flex align-items-center justify-content-center text-nowrap" data-v-dd6b0322><i class="ri-send-plane-line ri-16px scaleX-n1-rtl me-2" data-v-dd6b0322></i>Send Invoice</span></button><button class="btn btn-outline-secondary d-grid w-100 mb-4" data-v-dd6b0322>Download</button><div class="d-flex mb-4" data-v-dd6b0322><a class="btn btn-outline-secondary d-grid w-100 me-4" target="_blank" href="./app-invoice-print.html" data-v-dd6b0322> Print </a><a href="./app-invoice-edit.html" class="btn btn-outline-secondary d-grid w-100" data-v-dd6b0322> Edit </a></div><button class="btn btn-success d-grid w-100" data-bs-toggle="offcanvas" data-bs-target="#addPaymentOffcanvas" data-v-dd6b0322><span class="d-flex align-items-center justify-content-center text-nowrap" data-v-dd6b0322><i class="ri-money-dollar-circle-line ri-16px me-2" data-v-dd6b0322></i>Add Payment</span></button></div></div></div>',1))]),t[14]||(t[14]=f(`<div class="offcanvas offcanvas-end" id="sendInvoiceOffcanvas" aria-hidden="true" data-v-dd6b0322><div class="offcanvas-header border-bottom" data-v-dd6b0322><h5 class="offcanvas-title" data-v-dd6b0322>Send Invoice</h5><button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close" data-v-dd6b0322></button></div><div class="offcanvas-body flex-grow-1" data-v-dd6b0322><form data-v-dd6b0322><div class="form-floating form-floating-outline mb-5" data-v-dd6b0322><input type="text" class="form-control" id="invoice-from" value="shelbyComapny@email.com" placeholder="company@email.com" data-v-dd6b0322><label for="invoice-from" data-v-dd6b0322>From</label></div><div class="form-floating form-floating-outline mb-5" data-v-dd6b0322><input type="text" class="form-control" id="invoice-to" value="qConsolidated@email.com" placeholder="company@email.com" data-v-dd6b0322><label for="invoice-to" data-v-dd6b0322>To</label></div><div class="form-floating form-floating-outline mb-5" data-v-dd6b0322><input type="text" class="form-control" id="invoice-subject" value="Invoice of purchased Admin Templates" placeholder="Invoice regarding goods" data-v-dd6b0322><label for="invoice-subject" data-v-dd6b0322>Subject</label></div><div class="form-floating form-floating-outline mb-5" data-v-dd6b0322><textarea class="form-control" name="invoice-message" id="invoice-message" style="height:190px;" data-v-dd6b0322>    Dear Queen Consolidated,\r
            Thank you for your business, always a pleasure to work with you!\r
            We have generated a new invoice in the amount of $95.59\r
            We would appreciate payment of this invoice by 05/11/2021</textarea><label for="invoice-message" data-v-dd6b0322>Message</label></div><div class="mb-5" data-v-dd6b0322><span class="badge bg-label-primary rounded-pill" data-v-dd6b0322><i class="ri-links-line ri-14px me-1" data-v-dd6b0322></i><span class="align-middle" data-v-dd6b0322>Invoice Attached</span></span></div><div class="mb-4 d-flex flex-wrap" data-v-dd6b0322><button type="button" class="btn btn-primary me-4" data-bs-dismiss="offcanvas" data-v-dd6b0322>Send</button><button type="button" class="btn btn-outline-secondary" data-bs-dismiss="offcanvas" data-v-dd6b0322> Cancel </button></div></form></div></div><div class="offcanvas offcanvas-end" id="addPaymentOffcanvas" aria-hidden="true" data-v-dd6b0322><div class="offcanvas-header border-bottom" data-v-dd6b0322><h5 class="offcanvas-title" data-v-dd6b0322>Add Payment</h5><button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close" data-v-dd6b0322></button></div><div class="offcanvas-body flex-grow-1" data-v-dd6b0322><div class="d-flex justify-content-between bg-lighter p-2 mb-5" data-v-dd6b0322><p class="mb-0" data-v-dd6b0322>Invoice Balance:</p><p class="fw-medium mb-0" data-v-dd6b0322>$5000.00</p></div><form data-v-dd6b0322><div class="input-group input-group-merge mb-5" data-v-dd6b0322><span class="input-group-text" data-v-dd6b0322>$</span><div class="form-floating form-floating-outline" data-v-dd6b0322><input type="text" id="invoiceAmount" name="invoiceAmount" class="form-control invoice-amount" placeholder="100" data-v-dd6b0322><label for="invoiceAmount" data-v-dd6b0322>Payment Amount</label></div></div><div class="form-floating form-floating-outline mb-5" data-v-dd6b0322><input id="payment-date" class="form-control invoice-date" type="text" data-v-dd6b0322><label for="payment-date" data-v-dd6b0322>Payment Date</label></div><div class="form-floating form-floating-outline mb-5" data-v-dd6b0322><select class="form-select" id="payment-method" data-v-dd6b0322><option value="" selected disabled data-v-dd6b0322>Select payment method</option><option value="Cash" data-v-dd6b0322>Cash</option><option value="Bank Transfer" data-v-dd6b0322>Bank Transfer</option><option value="Debit Card" data-v-dd6b0322>Debit Card</option><option value="Credit Card" data-v-dd6b0322>Credit Card</option><option value="Paypal" data-v-dd6b0322>Paypal</option></select><label for="payment-method" data-v-dd6b0322>Payment Method</label></div><div class="form-floating form-floating-outline mb-5" data-v-dd6b0322><textarea class="form-control" id="payment-note" style="height:62px;" data-v-dd6b0322></textarea><label for="payment-note" data-v-dd6b0322>Internal Payment Note</label></div><div class="d-flex flex-wrap" data-v-dd6b0322><button type="button" class="btn btn-primary me-4" data-bs-dismiss="offcanvas" data-v-dd6b0322>Send</button><button type="button" class="btn btn-outline-secondary" data-bs-dismiss="offcanvas" data-v-dd6b0322> Cancel </button></div></form></div></div>`,2))],64)):(r(),i("div",_a,t[15]||(t[15]=[a("p",null,"Purchase Order not found.",-1)])))])]))}},Na=w(wa,[["__scopeId","data-v-dd6b0322"]]);export{Na as default};

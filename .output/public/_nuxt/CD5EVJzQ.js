import{j as w,s as O,k as V,g as G,l as C,c as u,a,b as n,h as I,i as t,d as h,w as v,o as p,q as Q,v as X,E as r,n as y,z as Y,A as m,B as c,I as Z}from"./Bkm6qw8b.js";import{_ as aa,a as sa,b as T,c as ta,d as ea}from"./BrFEKIuM.js";import{_ as oa}from"./mvyRji1Y.js";import{_ as la}from"./BAMzpvu1.js";import{_ as ia}from"./DleeVanq.js";import{u as na}from"./DD8T_SWG.js";import{u as ra}from"./VXGyPOT6.js";import{u as da}from"./Ca1Fz0tn.js";import{u as ua}from"./u26IMBn3.js";import{u as pa}from"./CI-DMe-d.js";import"./9Qm2jZ7z.js";const ma={class:"content-wrapper"},ca={class:"container-xxl flex-grow-1 container-p-y"},fa={class:"row g-6"},ga={class:"col-xl-4 col-lg-6 col-md-6"},ha={class:"card h-100"},va={class:"row h-100"},ba={class:"col-7"},Pa={class:"card-body text-sm-end text-center ps-sm-0"},wa={class:"col-12"},ya={class:"card"},_a={class:"card-header d-flex justify-content-between align-items-center flex-wrap"},xa={class:"d-flex align-items-center me-3 mb-2 mb-md-0"},ka={class:"d-flex align-items-center"},Ma={class:"btn-group me-2"},Sa={class:"dropdown-menu"},Va={class:"input-group"},Ca={class:"p-input-icon-left"},Ta={class:"card-datatable table-responsive py-3 px-3"},ja={key:0},La=["src"],Ea={key:1},Ua={class:"d-inline-block"},Ra={class:"dropdown-menu"},$a={key:0},Aa=["onClick"],Na={key:1},Ba=["onClick"],Da={class:"row g-6"},Fa={class:"col-md-6"},qa={class:"form-floating form-floating-outline"},Ka={class:"col-md-6"},za={class:"form-floating form-floating-outline"},Ha={class:"col-md-6"},Wa={class:"form-floating form-floating-outline"},Ja={class:"col-md-6"},Oa={class:"form-floating form-floating-outline"},Ga={class:"col-md-6"},Ia={class:"form-floating form-floating-outline"},Qa={class:"col-md-6"},Xa={class:"form-floating form-floating-outline"},Ya={class:"col-md-12"},Za={class:"form-floating form-floating-outline"},as={class:"modal-footer mt-6"},ss=["disabled"],ts={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},gs={__name:"perusahaan",setup(es){const _=Z(),j=o=>!o||typeof o!="string"?null:o.startsWith("http")||!_.public.apiBase?o:`${new URL(_.public.apiBase).origin}/${o}`,x=w(null),l=na(),L=ra(),E=ua(),{userHasPermission:k,userHasRole:M}=da(),{perusahaans:U,loading:b,totalRecords:R,params:f,form:i,isEditMode:P,showModal:$,validationErrors:A,selectedPerusahaan:N}=O(l),g=w(""),B=w([10,25,50,100]),D=V(()=>P.value?"Edit Perusahaan":"Tambah Perusahaan"),F=V(()=>P.value?"Silakan ubah data perusahaan di bawah ini.":"Silakan isi form di bawah ini untuk menambahkan perusahaan baru.");let d=null;G(()=>{l.fetchPerusahaans(),L.fetchPermissions(),E.loadUser();const o=document.getElementById("PerusahaanModal");o&&(d=new bootstrap.Modal(o))}),C($,o=>{o?d==null||d.show():d==null||d.hide()});const q=pa(()=>{l.setSearch(g.value)},500);C(g,q);const K=o=>l.setPagination(o),z=()=>{f.value.first=0,l.fetchPerusahaans()},H=o=>l.setSort(o),W=o=>{const s=o.target.files[0];s&&l.setLogo(s)},S=o=>{o==="csv"&&x.value.exportCSV()};return(o,s)=>(p(),u("div",ma,[a("div",ca,[s[32]||(s[32]=a("h4",{class:"mb-1"},"List Perusahaan",-1)),s[33]||(s[33]=a("p",{class:"mb-6"}," List perusahaan yang terdaftar di sistem ",-1)),a("div",fa,[s[22]||(s[22]=I('<div class="col-xl-4 col-lg-6 col-md-6"><div class="card"><div class="card-body"><div class="d-flex justify-content-between align-items-center mb-4"><p class="mb-0">Total 3 users</p><ul class="list-unstyled d-flex align-items-center avatar-group mb-0"><li data-bs-toggle="tooltip" data-popup="tooltip-custom" data-bs-placement="top" title="Kim Karlos" class="avatar pull-up"><img class="rounded-circle" src="'+aa+'" alt="Avatar"></li><li data-bs-toggle="tooltip" data-popup="tooltip-custom" data-bs-placement="top" title="Katy Turner" class="avatar pull-up"><img class="rounded-circle" src="'+sa+'" alt="Avatar"></li><li data-bs-toggle="tooltip" data-popup="tooltip-custom" data-bs-placement="top" title="Peter Adward" class="avatar pull-up"><img class="rounded-circle" src="'+T+'" alt="Avatar"></li><li class="avatar"><span class="avatar-initial rounded-circle pull-up bg-lighter text-body" data-bs-toggle="tooltip" data-bs-placement="bottom" title="3 more">+3</span></li></ul></div><div class="d-flex justify-content-between align-items-center"><div class="pegawai-heading"><h5 class="mb-1">Support</h5><a href="javascript:;" data-bs-toggle="modal" data-bs-target="#PegawaiModal" class="pegawai-edit-modal"></a></div><a href="javascript:void(0);" class="text-secondary"><i class="ri-file-copy-line ri-22px"></i></a></div></div></div></div><div class="col-xl-4 col-lg-6 col-md-6"><div class="card"><div class="card-body"><div class="d-flex justify-content-between align-items-center mb-4"><p class="mb-0">Total 2 users</p><ul class="list-unstyled d-flex align-items-center avatar-group mb-0"><li data-bs-toggle="tooltip" data-popup="tooltip-custom" data-bs-placement="top" title="Kim Merchent" class="avatar pull-up"><img class="rounded-circle" src="'+ta+'" alt="Avatar"></li><li data-bs-toggle="tooltip" data-popup="tooltip-custom" data-bs-placement="top" title="Sam D&#39;souza" class="avatar pull-up"><img class="rounded-circle" src="'+ea+'" alt="Avatar"></li><li data-bs-toggle="tooltip" data-popup="tooltip-custom" data-bs-placement="top" title="Nurvi Karlos" class="avatar pull-up"><img class="rounded-circle" src="'+T+'" alt="Avatar"></li><li class="avatar"><span class="avatar-initial rounded-circle pull-up bg-lighter text-body" data-bs-toggle="tooltip" data-bs-placement="bottom" title="3 more">+3</span></li></ul></div><div class="d-flex justify-content-between align-items-center"><div class="pegawai-heading"><h5 class="mb-1">Restricted User</h5><a href="javascript:;" data-bs-toggle="modal" data-bs-target="#PegawaiModal" class="pegawai-edit-modal"></a></div><a href="javascript:void(0);" class="text-secondary"><i class="ri-file-copy-line ri-22px"></i></a></div></div></div></div>',2)),a("div",ga,[a("div",ha,[a("div",va,[s[15]||(s[15]=a("div",{class:"col-5"},[a("div",{class:"d-flex align-items-end h-100 justify-content-center"},[a("img",{src:oa,class:"img-fluid",alt:"Image",width:"68"})])],-1)),a("div",ba,[a("div",Pa,[a("button",{"data-bs-target":"#PerusahaanModal","data-bs-toggle":"modal",class:"btn btn-sm btn-primary mb-4 ml-5 textwrap add-new-pegawai",onClick:s[0]||(s[0]=e=>t(l).openModal())}," Tambah Perusahaan ")])])])])]),s[23]||(s[23]=a("div",{class:"col-12"},[a("h4",{class:"mt-6 mb-1"},"Total Perusahaan"),a("p",{class:"mb-0"},"Find all of your company's administrator accounts and their associate Perusahaan.")],-1)),a("div",wa,[a("div",ya,[a("div",_a,[a("div",xa,[s[16]||(s[16]=a("span",{class:"me-2"},"Baris:",-1)),n(t(Q),{modelValue:t(f).rows,"onUpdate:modelValue":s[1]||(s[1]=e=>t(f).rows=e),options:B.value,onChange:z,placeholder:"Jumlah",style:{width:"8rem"}},null,8,["modelValue","options"])]),a("div",ka,[a("div",Ma,[s[17]||(s[17]=a("button",{class:"btn btn-secondary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[a("i",{class:"ri-upload-2-line me-1"}),h(" Export ")],-1)),a("ul",Sa,[a("li",null,[a("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:s[2]||(s[2]=e=>S("csv"))},"CSV")]),a("li",null,[a("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:s[3]||(s[3]=e=>S("pdf"))},"PDF")])])]),a("div",Va,[a("span",Ca,[n(t(X),{modelValue:g.value,"onUpdate:modelValue":s[4]||(s[4]=e=>g.value=e),placeholder:"Cari perusahaan...",class:"w-full md:w-20rem"},null,8,["modelValue"])])])])]),a("div",Ta,[n(ia,{ref_key:"myDataTableRef",ref:x,data:t(U),rows:t(f).rows,loading:t(b),totalRecords:t(R),lazy:!0,onPage:s[5]||(s[5]=e=>K(e)),onSort:s[6]||(s[6]=e=>H(e)),responsiveLayout:"scroll",paginatorPosition:"bottom",paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink",currentPageReportTemplate:"Menampilkan {first} sampai {last} dari {totalRecords} data"},{default:v(()=>[n(t(r),{field:"id",header:"#",sortable:!0}),n(t(r),{field:"logoPerusahaan",header:"Logo",sortable:!0},{body:v(e=>[e.data.logoPerusahaan?(p(),u("div",ja,[a("img",{src:j(e.data.logoPerusahaan),alt:"Logo",style:{height:"40px","max-width":"80px","object-fit":"contain"}},null,8,La)])):(p(),u("div",Ea,s[18]||(s[18]=[a("span",{class:"text-muted"},"Tidak ada logo",-1)])))]),_:1}),n(t(r),{field:"nmPerusahaan",header:"Nama Perusahaan",sortable:!0}),n(t(r),{field:"alamatPerusahaan",header:"Alamat Perusahaan",sortable:!0}),n(t(r),{field:"tlpPerusahaan",header:"No. Telp Perusahaan",sortable:!0}),n(t(r),{field:"emailPerusahaan",header:"Email Perusahaan",sortable:!0}),n(t(r),{field:"npwpPerusahaan",header:"NPWP Perusahaan",sortable:!0}),n(t(r),{header:"Actions",exportable:!1,style:{"min-width":"8rem"}},{body:v(e=>[a("div",Ua,[s[21]||(s[21]=a("a",{href:"javascript:;",class:"btn btn-sm btn-text-secondary rounded-pill btn-icon dropdown-toggle hide-arrow","data-bs-toggle":"dropdown"},[a("i",{class:"ri-more-2-fill"})],-1)),a("ul",Ra,[t(M)("superadmin")||t(k)("edit_perusahaan")?(p(),u("li",$a,[a("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:J=>t(l).openModal(e.data,"admin")},s[19]||(s[19]=[a("i",{class:"ri-edit-box-line me-2"},null,-1),h(" Edit ")]),8,Aa)])):y("",!0),t(M)("superadmin")||t(k)("delete_perusahaan")?(p(),u("li",Na,[a("a",{class:"dropdown-item text-danger",href:"javascript:void(0)",onClick:J=>t(l).deletePerusahaan(e.data.id)},s[20]||(s[20]=[a("i",{class:"ri-delete-bin-7-line me-2"},null,-1),h(" Hapus ")]),8,Ba)])):y("",!0)])])]),_:1})]),_:1},8,["data","rows","loading","totalRecords"])])])])]),n(la,{id:"PerusahaanModal",isEditMode:t(P),validationErrorsFromParent:t(A),title:D.value,description:F.value,selectedPerusahaan:t(N)},{default:v(()=>[a("form",{onSubmit:s[14]||(s[14]=Y(e=>t(l).savePerusahaan(),["prevent"]))},[a("div",Da,[a("div",Fa,[a("div",qa,[a("input",{type:"file",class:"form-control",id:"logoPerusahaan",onChange:W,placeholder:"Masukkan logo perusahaan"},null,32),s[24]||(s[24]=a("label",{for:"logoPerusahaan"},"Logo Perusahaan",-1))])]),a("div",Ka,[a("div",za,[m(a("input",{type:"text",class:"form-control",id:"kodePerusahaan","onUpdate:modelValue":s[7]||(s[7]=e=>t(i).kodePerusahaan=e),placeholder:"Masukkan kode perusahaan",required:""},null,512),[[c,t(i).kodePerusahaan]]),s[25]||(s[25]=a("label",{for:"kodePerusahaan"},"Kode Perusahaan",-1))])]),a("div",Ha,[a("div",Wa,[m(a("input",{type:"text",class:"form-control",id:"nmPerusahaan","onUpdate:modelValue":s[8]||(s[8]=e=>t(i).nmPerusahaan=e),placeholder:"Masukkan nama perusahaan",required:""},null,512),[[c,t(i).nmPerusahaan]]),s[26]||(s[26]=a("label",{for:"nmPerusahaan"},"Nama Perusahaan",-1))])]),a("div",Ja,[a("div",Oa,[m(a("input",{type:"text",class:"form-control",id:"tlpPerusahaan","onUpdate:modelValue":s[9]||(s[9]=e=>t(i).tlpPerusahaan=e),placeholder:"Masukkan no telp perusahaan",required:""},null,512),[[c,t(i).tlpPerusahaan]]),s[27]||(s[27]=a("label",{for:"tlpPerusahaan"},"No. Telp Perusahaan",-1))])]),a("div",Ga,[a("div",Ia,[m(a("input",{type:"text",class:"form-control",id:"emailPerusahaan","onUpdate:modelValue":s[10]||(s[10]=e=>t(i).emailPerusahaan=e),placeholder:"Masukkan email perusahaan",required:""},null,512),[[c,t(i).emailPerusahaan]]),s[28]||(s[28]=a("label",{for:"emailPerusahaan"},"Email Perusahaan",-1))])]),a("div",Qa,[a("div",Xa,[m(a("input",{type:"text",class:"form-control",id:"npwpPerusahaan","onUpdate:modelValue":s[11]||(s[11]=e=>t(i).npwpPerusahaan=e),placeholder:"Masukkan npwp perusahaan",required:""},null,512),[[c,t(i).npwpPerusahaan]]),s[29]||(s[29]=a("label",{for:"npwpPerusahaan"},"NPWP Perusahaan",-1))])]),a("div",Ya,[a("div",Za,[m(a("textarea",{class:"form-control h-px-100",id:"alamatPerusahaan",placeholder:"Alamat Perusahaan","onUpdate:modelValue":s[12]||(s[12]=e=>t(i).alamatPerusahaan=e)},"                                    ",512),[[c,t(i).alamatPerusahaan]]),s[30]||(s[30]=a("label",{for:"alamatPerusahaan"},"Alamat Perusahaan",-1))])]),a("div",as,[a("button",{type:"button",class:"btn btn-outline-secondary",onClick:s[13]||(s[13]=e=>t(l).closeModal())},"Tutup"),a("button",{type:"submit",class:"btn btn-primary",disabled:t(b)},[t(b)?(p(),u("span",ts)):y("",!0),s[31]||(s[31]=h(" Simpan "))],8,ss)])])],32)]),_:1},8,["isEditMode","validationErrorsFromParent","title","description","selectedPerusahaan"])]),s[34]||(s[34]=a("div",{class:"content-backdrop fade"},null,-1))]))}};export{gs as default};

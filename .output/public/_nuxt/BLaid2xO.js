import{_ as k}from"./6fodeROL.js";import{p as w,f,j as i,c as d,a as e,h as x,n as S,z as j,A as g,B as T,C as L,y as N,b as R,w as C,t as G,D as P,o as u}from"./Bkm6qw8b.js";import{_ as U}from"./CY5sM8NA.js";import{u as V}from"./u26IMBn3.js";const $=w("/img/illustrations/auth-basic-login-mask-light.png");function B(){return f().$iziToast}const M={class:"position-relative"},z={class:"authentication-wrapper authentication-basic container-p-y p-4 p-sm-0"},A={class:"authentication-inner py-6"},D={class:"card p-md-7 p-1"},E={class:"card-body mt-1"},q={class:"form-floating form-floating-outline mb-5"},I={class:"mb-5"},K={class:"form-password-toggle"},O={class:"input-group input-group-merge"},F={class:"form-floating form-floating-outline"},J=["type"],W={class:"mb-5 d-flex justify-content-between mt-5"},H={class:"mb-5"},Q=["disabled"],X={key:0},Y={key:1},Z={key:0,class:"text-danger mt-3"},is={__name:"login",setup(ss){const{$api:v}=f(),l=B(),b=V(),h=P(),c=i(""),p=i(""),a=i(!1),t=i(null),_=async()=>{var m;a.value=!0,t.value=null;try{const s=await fetch(v.login(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:c.value,password:p.value}),credentials:"include"});if(!s.ok){let o={};try{o=await s.json()}catch{}t.value=(o==null?void 0:o.message)||`Terjadi kesalahan (${s.status})`,l.error({title:"Login Gagal!",icon:"ri-close-line",message:`Gagal login: ${t.value}`,timeout:3e3,position:"topRight",layout:2}),a.value=!1;return}const n=await s.json();if(!n.token||!n.token.token){t.value="Token tidak ditemukan pada response server.",l.error({title:"Login Gagal!",icon:"ri-close-line",message:`Gagal login: ${t.value}`,timeout:3e3,position:"topRight",layout:2}),a.value=!1;return}localStorage.setItem("token",n.token.token),b.setUser(n.user),l.success({title:"Login Berhasil!",icon:"ri-check-line",message:"Selamat datang",timeout:3e3,position:"topRight",layout:2}),h.push("/dashboard")}catch(s){t.value=((m=s==null?void 0:s.data)==null?void 0:m.message)||s.message||"Terjadi kesalahan saat login.",l.error({title:"Login Gagal!",icon:"ri-close-line",message:`Gagal login: ${t.value}`,timeout:3e3,position:"topRight",layout:2})}finally{a.value=!1}},r=i(!1),y=()=>{r.value=!r.value};return(m,s)=>{const n=k;return u(),d("div",M,[e("div",z,[e("div",A,[e("div",D,[s[8]||(s[8]=x('<div class="app-brand justify-content-center mt-5"><a href="/" class="app-brand-link gap-2"><span class="app-brand-logo demo"><img src="'+U+'" alt="" height="40"></span><span class="app-brand-text demo text-heading fw-semibold">Kainnova</span></a></div>',1)),e("div",E,[s[6]||(s[6]=e("h4",{class:"mb-1"},"Welcome to Kainnova! 👋",-1)),s[7]||(s[7]=e("p",{class:"mb-5"},"Please sign-in to your account and start the adventure",-1)),e("form",{class:"mb-5",onSubmit:j(_,["prevent"])},[e("div",q,[g(e("input",{type:"text",class:"form-control",id:"email","onUpdate:modelValue":s[0]||(s[0]=o=>c.value=o),placeholder:"Enter your email or username",autofocus:"",required:""},null,512),[[T,c.value]]),s[2]||(s[2]=e("label",{for:"email"},"Email or Username",-1))]),e("div",I,[e("div",K,[e("div",O,[e("div",F,[g(e("input",{type:r.value?"text":"password",id:"password",class:"form-control","onUpdate:modelValue":s[1]||(s[1]=o=>p.value=o),placeholder:"············",required:"","aria-describedby":"password"},null,8,J),[[L,p.value]]),s[3]||(s[3]=e("label",{for:"password"},"Password",-1))]),e("span",{class:"input-group-text cursor-pointer",onClick:y},[e("i",{class:N(r.value?"ri-eye-line":"ri-eye-off-line")},null,2)])])])]),e("div",W,[s[5]||(s[5]=e("div",{class:"form-check mt-2"},[e("input",{class:"form-check-input",type:"checkbox",id:"remember-me"}),e("label",{class:"form-check-label",for:"remember-me"}," Remember Me ")],-1)),R(n,{to:"/auth/forgot-password",class:"float-end mb-1 mt-2"},{default:C(()=>s[4]||(s[4]=[e("span",null,"Forgot Password?",-1)])),_:1,__:[4]})]),e("div",H,[e("button",{class:"btn btn-primary d-grid w-100",type:"submit",disabled:a.value},[a.value?(u(),d("span",X,"Signing In...")):(u(),d("span",Y,"Sign in"))],8,Q)])],32),t.value?(u(),d("p",Z,G(t.value),1)):S("",!0)])]),s[9]||(s[9]=e("img",{alt:"mask",src:$,class:"authentication-image d-none d-lg-block"},null,-1))])])])}}};export{is as default};

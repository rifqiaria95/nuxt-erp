import{_ as A,j as v,s as H,k as y,g as I,l as x,c as p,a as e,b as n,i as s,w as b,o as u,q,v as z,E as c,n as _,d as g,z as J,A as O,B as G}from"./Bkm6qw8b.js";import{_ as K}from"./mvyRji1Y.js";import{u as Q}from"./CaXBSKlM.js";import{u as W}from"./VXGyPOT6.js";import{u as X}from"./Ca1Fz0tn.js";import{_ as Y}from"./BAMzpvu1.js";import{_ as Z}from"./DleeVanq.js";import{C as ee}from"./D9zIpW-x.js";import{u as te}from"./u26IMBn3.js";import{u as se}from"./CI-DMe-d.js";import"./9Qm2jZ7z.js";const oe={class:"content-wrapper"},ae={class:"container-xxl flex-grow-1 container-p-y"},ie={class:"row g-6 mb-6"},ne={class:"col-xl-4 col-lg-6 col-md-6"},re={class:"card h-100"},le={class:"row h-100"},de={class:"col-sm-7"},me={class:"card-body text-sm-end text-center ps-sm-0"},pe={class:"row g-6"},ue={class:"col-12"},ce={class:"card"},fe={class:"card-header d-flex justify-content-between align-items-center flex-wrap"},ve={class:"d-flex align-items-center me-3 mb-2 mb-md-0"},be={class:"d-flex align-items-center"},_e={class:"p-input-icon-left"},ge={class:"card-datatable table-responsive py-3 px-3"},we={class:"d-inline-block"},he={class:"dropdown-menu"},De={key:0},ye=["onClick"],xe={key:1},ke=["onClick"],Pe={class:"row g-6"},Ve={class:"col-md-6"},Ce={class:"form-floating form-floating-outline"},Me={class:"col-md-6"},Se={class:"form-floating form-floating-outline"},Te={class:"modal-footer mt-6"},Re=["disabled"],$e={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},Ee={__name:"departemen",setup(Le){const k=v(null),a=Q(),P=W(),V=te(),{userHasPermission:w,userHasRole:h}=X(),{departemens:C,divisis:M,loading:f,totalRecords:S,params:l,form:d,isEditMode:D,showModal:T,validationErrors:R}=H(a),m=v(""),$=v([10,25,50,100]),E=y(()=>D.value?"Edit Departemen":"Tambah Departemen"),L=y(()=>D.value?"Ubah detail departemen.":"Isi untuk menambah departemen baru.");let r=null;I(()=>{a.fetchDepartemens(),P.fetchPermissions(),V.loadUser();const i=document.getElementById("DepartemenModal");i&&(r=new bootstrap.Modal(i))}),x(T,i=>{i?r==null||r.show():r==null||r.hide()});const B=se(()=>{a.setSearch(m.value)},500);x(m,B);const N=i=>a.setPagination(i),U=()=>{l.value.first=0,a.fetchDepartemens()},j=i=>a.setSort(i);return(i,t)=>(u(),p("div",oe,[e("div",ae,[t[19]||(t[19]=e("h4",{class:"mb-1"},"List Departemen",-1)),t[20]||(t[20]=e("p",{class:"mb-6"}," List departemen yang terdaftar di sistem ",-1)),e("div",ie,[e("div",ne,[e("div",re,[e("div",le,[t[10]||(t[10]=e("div",{class:"col-sm-5"},[e("div",{class:"d-flex align-items-end h-100 justify-content-center"},[e("img",{src:K,class:"img-fluid",alt:"Image",width:"70"})])],-1)),e("div",de,[e("div",me,[e("button",{onClick:t[0]||(t[0]=o=>s(a).openModal()),class:"btn btn-primary mb-2 text-nowrap add-new-role"}," Tambah Departemen "),t[9]||(t[9]=e("p",{class:"mb-0 mt-1"},"Buat Departemen baru",-1))])])])])])]),e("div",pe,[t[16]||(t[16]=e("div",{class:"col-12"},[e("h4",{class:"mt-6 mb-1"},"Total Departemen"),e("p",{class:"mb-0"},"Find all of your company's administrator accounts and their associate Departemen.")],-1)),e("div",ue,[e("div",ce,[e("div",fe,[e("div",ve,[t[11]||(t[11]=e("span",{class:"me-2"},"Baris:",-1)),n(s(q),{modelValue:s(l).rows,"onUpdate:modelValue":t[1]||(t[1]=o=>s(l).rows=o),options:$.value,onChange:U,placeholder:"Jumlah",style:{width:"8rem"}},null,8,["modelValue","options"])]),e("div",be,[e("span",_e,[t[12]||(t[12]=e("i",{class:"ri-search-line"},null,-1)),n(s(z),{modelValue:m.value,"onUpdate:modelValue":t[2]||(t[2]=o=>m.value=o),placeholder:"Cari Departemen...",class:"w-full md:w-20rem"},null,8,["modelValue"])])])]),e("div",ge,[n(Z,{ref_key:"myDataTableRef",ref:k,data:s(C),rows:s(l).rows,loading:s(f),totalRecords:s(S),lazy:!0,onPage:t[3]||(t[3]=o=>N(o)),onSort:t[4]||(t[4]=o=>j(o)),paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink",currentPageReportTemplate:"Menampilkan {first} sampai {last} dari {totalRecords} data"},{default:b(()=>[n(s(c),{field:"id",header:"#",sortable:!0}),n(s(c),{field:"nmDepartemen",header:"Nama Departemen",sortable:!0}),n(s(c),{field:"divisi.nmDivisi",header:"Divisi",sortable:!0}),n(s(c),{header:"Actions",exportable:!1,style:{"min-width":"8rem"}},{body:b(o=>[e("div",we,[t[15]||(t[15]=e("a",{href:"javascript:;",class:"btn btn-sm btn-text-secondary rounded-pill btn-icon dropdown-toggle hide-arrow","data-bs-toggle":"dropdown"},[e("i",{class:"ri-more-2-fill"})],-1)),e("ul",he,[s(h)("superadmin")||s(w)("edit_departemen")?(u(),p("li",De,[e("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:F=>s(a).openModal(o.data,"admin")},t[13]||(t[13]=[e("i",{class:"ri-edit-box-line me-2"},null,-1),g(" Edit ")]),8,ye)])):_("",!0),s(h)("superadmin")||s(w)("delete_departemen")?(u(),p("li",xe,[e("a",{class:"dropdown-item text-danger",href:"javascript:void(0)",onClick:F=>s(a).deleteDepartemen(o.data.id)},t[14]||(t[14]=[e("i",{class:"ri-delete-bin-7-line me-2"},null,-1),g(" Hapus ")]),8,ke)])):_("",!0)])])]),_:1})]),_:1},8,["data","rows","loading","totalRecords"])])])])]),n(Y,{id:"DepartemenModal",title:E.value,description:L.value,"validation-errors-from-parent":s(R)},{default:b(()=>[e("form",{onSubmit:t[8]||(t[8]=J(o=>s(a).saveDepartemen(),["prevent"]))},[e("div",Pe,[e("div",Ve,[e("div",Ce,[O(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[5]||(t[5]=o=>s(d).nmDepartemen=o),placeholder:"Masukkan nama departemen",required:""},null,512),[[G,s(d).nmDepartemen]]),t[17]||(t[17]=e("label",null,"Nama Departemen",-1))])]),e("div",Me,[e("div",Se,[n(s(ee),{modelValue:s(d).divisiId,"onUpdate:modelValue":t[6]||(t[6]=o=>s(d).divisiId=o),options:s(M),label:"nmDivisi",reduce:o=>o.id,placeholder:"-- Pilih Divisi --",class:"select-divisi"},null,8,["modelValue","options","reduce"])])])]),e("div",Te,[e("button",{type:"button",class:"btn btn-outline-secondary",onClick:t[7]||(t[7]=o=>s(a).closeModal())},"Tutup"),e("button",{type:"submit",class:"btn btn-primary",disabled:s(f)},[s(f)?(u(),p("span",$e)):_("",!0),t[18]||(t[18]=g(" Simpan "))],8,Re)])],32)]),_:1},8,["title","description","validation-errors-from-parent"])]),t[21]||(t[21]=e("div",{class:"content-backdrop fade"},null,-1))]))}},Oe=A(Ee,[["__scopeId","data-v-e1cb38af"]]);export{Oe as default};

import{j as _,s as H,k as P,g as q,l as j,c as f,a as t,b as l,m as p,n as d,i as e,d as g,w,o as r,q as z,v as G,E as y,z as K,A as Q,B as W,t as X}from"./Bkm6qw8b.js";import{_ as Y}from"./BAMzpvu1.js";import{_ as m}from"./CdgIhitS.js";import{_ as Z}from"./DleeVanq.js";import{u as I}from"./BJ-fbTQt.js";import{u as tt}from"./VXGyPOT6.js";import{u as at}from"./Ca1Fz0tn.js";import{u as et}from"./u26IMBn3.js";import{u as ot}from"./CI-DMe-d.js";import"./D1pefl20.js";import"./9Qm2jZ7z.js";const st={class:"content-wrapper"},nt={class:"container-xxl flex-grow-1 container-p-y"},it={class:"row g-6 mb-6"},rt={class:"row g-6"},lt={class:"col-12"},dt={class:"card"},ut={class:"card-header d-flex justify-content-between align-items-center flex-wrap"},mt={class:"d-flex align-items-center me-3 mb-2 mb-md-0"},pt={class:"d-flex align-items-center"},bt={class:"btn-group me-2"},ct={class:"dropdown-menu"},ft={class:"input-group"},gt={class:"p-input-icon-left"},vt={class:"card-datatable table-responsive py-3 px-3"},kt={class:"d-inline-block"},_t={class:"dropdown-menu"},wt={key:0},yt=["onClick"],ht={key:1},xt=["onClick"],Jt={class:"row g-6"},St={class:"col-md-12"},Pt={class:"form-floating form-floating-outline"},jt={class:"d-flex justify-content-end mt-6"},Ct=["disabled"],Mt={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},Ft={__name:"jabatan",setup(Tt){const h=_(null),s=I(),C=tt(),M=et(),{userHasPermission:x,userHasRole:J}=at(),{jabatans:T,loading:v,stats:n,totalRecords:V,params:b,form:S,isEditMode:k,showModal:R,validationErrors:$}=H(s),c=_(""),D=_([10,25,50,100]),B=P(()=>k.value?"Edit Jabatan":"Tambah Jabatan"),E=P(()=>k.value?"Silakan ubah data jabatan di bawah ini.":"Silakan isi form di bawah ini untuk menambahkan jabatan baru.");let u=null;q(()=>{s.fetchJabatans(),s.fetchStats(),C.fetchPermissions(),M.loadUser();const i=document.getElementById("JabatanModal");i&&(u=new bootstrap.Modal(i))}),j(R,i=>{i?u==null||u.show():u==null||u.hide()});const L=ot(()=>{s.setSearch(c.value)},500);j(c,L);const N=i=>s.setPagination(i),U=()=>{b.value.first=0,s.fetchJabatans()},O=i=>s.setSort(i),A=i=>{h.value.exportCSV()};return(i,a)=>(r(),f("div",st,[t("div",nt,[a[16]||(a[16]=t("h4",{class:"mb-1"},"List Jabatan",-1)),a[17]||(a[17]=t("p",{class:"mb-6"}," List jabatan yang terdaftar di sistem ",-1)),t("div",it,[e(n).total!==void 0?(r(),p(m,{key:0,title:"Total Jabatan",total:e(n).total+" Jabatan"},null,8,["total"])):d("",!0),e(n).direktur_utama!==void 0?(r(),p(m,{key:1,title:"Direktur Utama",total:e(n).direktur_utama+" Orang"},null,8,["total"])):d("",!0),e(n).direktur_keuangan!==void 0?(r(),p(m,{key:2,title:"Direktur Keuangan",total:e(n).direktur_keuangan+" Orang"},null,8,["total"])):d("",!0),e(n).direktur_operasional!==void 0?(r(),p(m,{key:3,title:"Direktur Operasional",total:e(n).direktur_operasional+" Orang"},null,8,["total"])):d("",!0),e(n).general_manager!==void 0?(r(),p(m,{key:4,title:"General Manager",total:e(n).general_manager+" Orang"},null,8,["total"])):d("",!0),l(m,{isAddButtonCard:!0,"image-src":"/img/illustrations/add-new-role-illustration.png","image-alt":"Tambah Jabatan","button-text":"Tambah Jabatan",onButtonClick:a[0]||(a[0]=o=>e(s).openModal())})]),t("div",rt,[a[14]||(a[14]=t("div",{class:"col-12"},[t("h4",{class:"mt-6 mb-1"},"Total Jabatan"),t("p",{class:"mb-0"},"Find all of your company's administrator accounts and their associate Jabatan.")],-1)),t("div",lt,[t("div",dt,[t("div",ut,[t("div",mt,[a[9]||(a[9]=t("span",{class:"me-2"},"Baris:",-1)),l(e(z),{modelValue:e(b).rows,"onUpdate:modelValue":a[1]||(a[1]=o=>e(b).rows=o),options:D.value,onChange:U,placeholder:"Jumlah",style:{width:"8rem"}},null,8,["modelValue","options"])]),t("div",pt,[t("div",bt,[a[10]||(a[10]=t("button",{class:"btn btn-secondary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("i",{class:"ri-upload-2-line me-1"}),g(" Export ")],-1)),t("ul",ct,[t("li",null,[t("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:a[2]||(a[2]=o=>A())},"CSV")])])]),t("div",ft,[t("span",gt,[l(e(G),{modelValue:c.value,"onUpdate:modelValue":a[3]||(a[3]=o=>c.value=o),placeholder:"Cari Jabatan...",class:"w-full md:w-20rem"},null,8,["modelValue"])])])])]),t("div",vt,[l(Z,{ref_key:"myDataTableRef",ref:h,data:e(T),rows:e(b).rows,loading:e(v),totalRecords:e(V),lazy:!0,onPage:a[4]||(a[4]=o=>N(o)),onSort:a[5]||(a[5]=o=>O(o)),responsiveLayout:"scroll",paginatorPosition:"bottom",paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink",currentPageReportTemplate:"Menampilkan {first} sampai {last} dari {totalRecords} data"},{default:w(()=>[l(e(y),{field:"id",header:"#",sortable:!0}),l(e(y),{field:"nmJabatan",header:"Nama Jabatan",sortable:!0}),l(e(y),{header:"Actions",exportable:!1,style:{"min-width":"8rem"}},{body:w(o=>[t("div",kt,[a[13]||(a[13]=t("a",{href:"javascript:;",class:"btn btn-sm btn-text-secondary rounded-pill btn-icon dropdown-toggle hide-arrow","data-bs-toggle":"dropdown"},[t("i",{class:"ri-more-2-fill"})],-1)),t("ul",_t,[e(J)("superadmin")||e(x)("edit_jabatan")?(r(),f("li",wt,[t("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:F=>e(s).openModal(o.data,"admin")},a[11]||(a[11]=[t("i",{class:"ri-edit-box-line me-2"},null,-1),g(" Edit ")]),8,yt)])):d("",!0),e(J)("superadmin")||e(x)("delete_jabatan")?(r(),f("li",ht,[t("a",{class:"dropdown-item text-danger",href:"javascript:void(0)",onClick:F=>e(s).deleteJabatan(o.data.id)},a[12]||(a[12]=[t("i",{class:"ri-delete-bin-7-line me-2"},null,-1),g(" Hapus ")]),8,xt)])):d("",!0)])])]),_:1})]),_:1},8,["data","rows","loading","totalRecords"])])])])]),l(Y,{id:"JabatanModal",title:B.value,description:E.value,"validation-errors-from-parent":e($)},{default:w(()=>[t("form",{onSubmit:a[8]||(a[8]=K(o=>e(s).saveJabatan(),["prevent"]))},[t("div",Jt,[t("div",St,[t("div",Pt,[Q(t("input",{type:"text",class:"form-control",id:"name","onUpdate:modelValue":a[6]||(a[6]=o=>e(S).nmJabatan=o),placeholder:"Masukkan nama jabatan",required:""},null,512),[[W,e(S).nmJabatan]]),a[15]||(a[15]=t("label",{for:"name"},"Nama Jabatan",-1))])]),t("div",jt,[t("button",{type:"button",class:"btn btn-outline-secondary me-2",onClick:a[7]||(a[7]=o=>e(s).closeModal())},"Tutup"),t("button",{type:"submit",class:"btn btn-primary",disabled:e(v)},[e(v)?(r(),f("span",Mt)):d("",!0),g(" "+X(e(k)?"Update":"Simpan"),1)],8,Ct)])])],32)]),_:1},8,["title","description","validation-errors-from-parent"])]),a[18]||(a[18]=t("div",{class:"content-backdrop fade"},null,-1))]))}};export{Ft as default};

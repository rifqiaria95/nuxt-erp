import{O as Q,M as N,j as x,k as T,g as F,l as X,c as l,o as r,a as e,n as R,y,at as V,F as A,x as O,b as _,t as k,w as U,A as Y,ag as J,ah as W,f as ee,D as ae,aq as te,h as E,z as se,i as z,an as ne,_ as oe,d as H,a8 as ie}from"./Bkm6qw8b.js";import{_ as le}from"./6fodeROL.js";import{_ as re}from"./CY5sM8NA.js";import{u as de}from"./Drh9hcrB.js";import{u as ce}from"./C2Vu3uzx.js";import{u as ue}from"./BRMs87XN.js";import{u as q}from"./u26IMBn3.js";import{_ as K}from"./IRJcPPG7.js";import"./9Qm2jZ7z.js";const pe={class:"menu-inner py-7"},me=["onClick"],ve={key:0,class:"menu-sub"},fe=["onMouseenter"],ge={__name:"Sidebar",setup($){const d=de();ce();const n=Q(),c=N(),M=ue(),m=q(),i=x(new Set),f=T(()=>{var a;return(a=m.user)==null?void 0:a.roles.some(s=>s.name==="superadmin")}),g=T(()=>d.sidebarMenuGroups?[...d.sidebarMenuGroups].filter(a=>a.name==="Admin"||a.jenisMenu===7?f.value:!0).sort((a,s)=>(a.order??0)-(s.order??0)):[]),v={"/master/customer":()=>M.prefetchCustomers(),"/admin/menu-group":()=>d.prefetchMenuGroups()},h=a=>{v[a]&&v[a]()},S=()=>{c.setSidebarHovered(!0)},j=()=>{c.setSidebarHovered(!1)},G=a=>{i.value.has(a)?i.value.delete(a):(i.value.clear(),i.value.add(a))},o=a=>{var s;return(s=a.menuDetails)==null?void 0:s.some(D=>D.route===n.path)},t=a=>i.value.has(a.id);function b(){c.toggleSidebar()}const w=()=>{const a=d.sidebarMenuGroups.find(o);a&&(i.value.has(a.id)||(i.value.clear(),i.value.add(a.id)))};F(async()=>{await m.loadUser(),await d.fetchAllMenuGroups(),w()}),X(()=>n.path,()=>{w()});const C=a=>{a.style.height="0",a.style.overflow="hidden"},L=(a,s)=>{a.style.height=a.scrollHeight+"px",a.addEventListener("transitionend",s,{once:!0})},B=a=>{a.style.height="auto"},I=a=>{a.style.height=a.scrollHeight+"px",a.style.overflow="hidden"},Z=(a,s)=>{getComputedStyle(a).height,requestAnimationFrame(()=>{a.style.height="0"}),a.addEventListener("transitionend",s,{once:!0})};return(a,s)=>{const D=le;return r(),l("aside",{id:"layout-menu",class:"layout-menu menu-vertical menu bg-menu-theme",onMouseenter:S,onMouseleave:j},[e("div",{class:"app-brand demo"},[s[1]||(s[1]=e("a",{href:"index.html",class:"app-brand-link"},[e("span",{class:"app-brand-logo demo"},[e("img",{src:re,alt:"",height:"40"})]),e("span",{class:"app-brand-text demo menu-text fw-semibold ms-2"},"Kainnova")],-1)),e("a",{href:"javascript:void(0);",class:"layout-menu-toggle menu-link text-large ms-auto",onClick:b},s[0]||(s[0]=[e("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M8.47365 11.7183C8.11707 12.0749 8.11707 12.6531 8.47365 13.0097L12.071 16.607C12.4615 16.9975 12.4615 17.6305 12.071 18.021C11.6805 18.4115 11.0475 18.4115 10.657 18.021L5.83009 13.1941C5.37164 12.7356 5.37164 11.9924 5.83009 11.5339L10.657 6.707C11.0475 6.31653 11.6805 6.31653 12.071 6.707C12.4615 7.09747 12.4615 7.73053 12.071 8.121L8.47365 11.7183Z","fill-opacity":"0.9"}),e("path",{d:"M14.3584 11.8336C14.0654 12.1266 14.0654 12.6014 14.3584 12.8944L18.071 16.607C18.4615 16.9975 18.4615 17.6305 18.071 18.021C17.6805 18.4115 17.0475 18.4115 16.657 18.021L11.6819 13.0459C11.3053 12.6693 11.3053 12.0587 11.6819 11.6821L16.657 6.707C17.0475 6.31653 17.6805 6.31653 18.071 6.707C18.4615 7.09747 18.4615 7.73053 18.071 8.121L14.3584 11.8336Z","fill-opacity":"0.4"})],-1)]))]),s[4]||(s[4]=e("div",{class:"menu-inner-shadow"},null,-1)),e("ul",pe,[e("li",{class:y(["menu-item",{active:(a._.provides[V]||a.$route).path==="/dashboard"}])},s[2]||(s[2]=[e("a",{href:"/dashboard",class:"menu-link"},[e("i",{class:"menu-icon tf-icons ri-home-smile-line"}),e("div",{"data-i18n":"Dashboards"},"Dashboards")],-1)]),2),s[3]||(s[3]=e("li",{class:"menu-header mt-5"},[e("span",{class:"menu-header-text","data-i18n":"Apps & Pages"},"Apps & Pages")],-1)),g.value.length?(r(!0),l(A,{key:0},O(g.value,u=>(r(),l("li",{class:y(["menu-item",{open:t(u),active:o(u)}]),key:u.id},[e("a",{href:"javascript:void(0);",class:"menu-link menu-toggle",onClick:p=>G(u.id)},[e("i",{class:y(["menu-icon","tf-icons",u.icon])},null,2),e("div",null,k(u.name),1)],8,me),_(W,{name:"menu-expand",onBeforeEnter:C,onEnter:L,onAfterEnter:B,onBeforeLeave:I,onLeave:Z},{default:U(()=>[u.menuDetails&&u.menuDetails.length?Y((r(),l("ul",ve,[(r(!0),l(A,null,O([...u.menuDetails].sort((p,P)=>(p.order??0)-(P.order??0)),p=>(r(),l("li",{class:y(["menu-item",{active:p.route===(a._.provides[V]||a.$route).path}]),key:p.id,onMouseenter:P=>h(p.route)},[_(D,{to:p.route,class:"menu-link"},{default:U(()=>[e("div",null,k(p.name),1)]),_:2},1032,["to"])],42,fe))),128))],512)),[[J,t(u)]]):R("",!0)]),_:2},1024)],2))),128)):R("",!0)])],32)}}},he={class:"layout-navbar container-xxl navbar navbar-expand-xl navbar-detached align-items-center bg-navbar-theme",id:"layout-navbar"},be={class:"navbar-nav-right d-flex align-items-center",id:"navbar-collapse"},we={class:"navbar-nav flex-row align-items-center ms-auto"},xe={class:"dropdown-item",href:"#"},ye={class:"d-flex"},_e={class:"flex-grow-1"},ke={class:"fw-medium d-block small"},Se={class:"text-muted"},Ce={key:1,class:"navbar-search-wrapper search-input-wrapper w-100"},Le={__name:"Navbar",setup($){const{$api:d}=ee(),n=q(),c=ae(),M=N(),m=x(!1),i=x(null),f=async()=>{var o;m.value=!m.value,m.value&&(await ne(),(o=i.value)==null||o.focus())},g=o=>{o.ctrlKey&&o.key==="/"&&(o.preventDefault(),f())},v=x(!1),h=x(null),S=o=>{h.value&&!h.value.contains(o.target)&&(v.value=!1)};F(()=>{n.loadUser(),window.addEventListener("keydown",g),document.addEventListener("click",S)}),te(()=>{window.removeEventListener("keydown",g),document.removeEventListener("click",S)});const j=()=>{M.toggleSidebar()},G=async()=>{n.clearUser(),document.documentElement.className="",localStorage.removeItem("token");const o=await fetch(d.logout(),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"});if(!o.ok){let t={};try{t=await o.json()}catch{}toast.error({title:"Logout Gagal!",icon:"ri-close-line",message:`Gagal logout: ${(t==null?void 0:t.message)||`Terjadi kesalahan (${o.status})`}`,timeout:3e3,position:"topRight",layout:2});return}c.push("/auth/login")};return(o,t)=>{var b,w,C,L;return r(),l("nav",he,[e("div",{class:"layout-menu-toggle navbar-nav align-items-xl-center me-4 me-xl-0 d-xl-none"},[e("a",{class:"nav-item nav-link px-0 me-xl-6",href:"javascript:void(0)",onClick:j},t[1]||(t[1]=[e("i",{class:"ri-menu-fill ri-22px"},null,-1)]))]),e("div",be,[m.value?(r(),l("div",Ce,[e("input",{ref_key:"searchInput",ref:i,type:"text",class:"form-control search-input container-xxl border-0",placeholder:"Search...","aria-label":"Search..."},null,512),e("i",{class:"ri-close-fill search-toggler cursor-pointer",onClick:f})])):(r(),l(A,{key:0},[e("div",{class:"navbar-nav align-items-center"},[e("div",{class:"nav-item navbar-search-wrapper mb-0"},[e("a",{class:"nav-item nav-link search-toggler fw-normal px-0",href:"javascript:void(0);",onClick:f},t[2]||(t[2]=[e("i",{class:"ri-search-line ri-22px scaleX-n1-rtl me-3"},null,-1),e("span",{class:"d-none d-md-inline-block text-muted"},"Search (Ctrl+/)",-1)]))])]),e("ul",we,[t[7]||(t[7]=E('<li class="nav-item dropdown-language dropdown"><a class="nav-link btn btn-text-secondary rounded-pill btn-icon dropdown-toggle hide-arrow" href="javascript:void(0);" data-bs-toggle="dropdown"><i class="ri-translate-2 ri-22px"></i></a><ul class="dropdown-menu dropdown-menu-end"><li><a class="dropdown-item" href="javascript:void(0);" data-language="en" data-text-direction="ltr"><span class="align-middle">English</span></a></li><li><a class="dropdown-item" href="javascript:void(0);" data-language="fr" data-text-direction="ltr"><span class="align-middle">French</span></a></li><li><a class="dropdown-item" href="javascript:void(0);" data-language="ar" data-text-direction="rtl"><span class="align-middle">Arabic</span></a></li><li><a class="dropdown-item" href="javascript:void(0);" data-language="de" data-text-direction="ltr"><span class="align-middle">German</span></a></li></ul></li><li class="nav-item dropdown-shortcuts navbar-dropdown dropdown me-1 me-xl-0"><a class="nav-link btn btn-text-secondary rounded-pill btn-icon dropdown-toggle hide-arrow" href="javascript:void(0);" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false"><i class="ri-star-smile-line ri-22px"></i></a></li><li class="nav-item dropdown-notifications navbar-dropdown dropdown me-4 me-xl-1"><a class="nav-link btn btn-text-secondary rounded-pill btn-icon dropdown-toggle hide-arrow" href="javascript:void(0);" data-bs-toggle="dropdown" data-bs-auto-close="outside" aria-expanded="false"><i class="ri-notification-2-line ri-22px"></i><span class="position-absolute top-0 start-50 translate-middle-y badge badge-dot bg-danger mt-2 border"></span></a></li>',3)),e("li",{class:"nav-item navbar-dropdown dropdown-user dropdown",ref_key:"avatarDropdownRef",ref:h},[e("a",{class:"nav-link dropdown-toggle hide-arrow",href:"javascript:void(0);",onClick:t[0]||(t[0]=se(B=>v.value=!v.value,["prevent"]))},t[3]||(t[3]=[e("div",{class:"avatar avatar-online"},[e("img",{src:K,alt:"",class:"rounded-circle"})],-1)])),e("ul",{class:y(["dropdown-menu dropdown-menu-end",{show:v.value}])},[e("li",null,[e("a",xe,[e("div",ye,[t[4]||(t[4]=e("div",{class:"flex-shrink-0 me-2"},[e("div",{class:"avatar avatar-online"},[e("img",{src:K,alt:"",class:"rounded-circle"})])],-1)),e("div",_e,[e("span",ke,k(((b=z(n).user)==null?void 0:b.fullName)||"Guest"),1),e("small",Se,k(((L=(C=(w=z(n).user)==null?void 0:w.roles)==null?void 0:C[0])==null?void 0:L.name)||"Guest"),1)])])])]),t[6]||(t[6]=E('<li><div class="dropdown-divider"></div></li><li><a class="dropdown-item" href="#"><i class="ri-user-3-line ri-22px me-3"></i><span class="align-middle">My Profile</span></a></li><li><a class="dropdown-item" href="#"><i class="ri-settings-4-line ri-22px me-3"></i><span class="align-middle">Settings</span></a></li><li><a class="dropdown-item" href="#"><span class="d-flex align-items-center align-middle"><i class="flex-shrink-0 ri-file-text-line ri-22px me-3"></i><span class="flex-grow-1 align-middle">Billing</span><span class="flex-shrink-0 badge badge-center rounded-pill bg-danger">4</span></span></a></li><li><div class="dropdown-divider"></div></li><li><a class="dropdown-item" href="#"><i class="ri-money-dollar-circle-line ri-22px me-3"></i><span class="align-middle">Pricing</span></a></li><li><a class="dropdown-item" href="#"><i class="ri-question-line ri-22px me-3"></i><span class="align-middle">FAQ</span></a></li>',7)),e("li",null,[e("div",{class:"d-grid px-4 pt-2 pb-1"},[e("a",{class:"btn btn-sm btn-danger d-flex",href:"javascript:void(0);",onClick:G},t[5]||(t[5]=[e("small",{class:"align-middle"},"Logout",-1),e("i",{class:"ri-logout-box-r-line ms-2 ri-16px"},null,-1)]))])])],2)],512)])],64))])])}}},$e={class:"content-footer footer bg-footer-theme"},Me={class:"container-xxl"},je={class:"footer-container d-flex align-items-center justify-content-between py-4 flex-md-row flex-column"},Ge={class:"text-body mb-2 mb-md-0"},De={__name:"Footer",setup($){return(d,n)=>(r(),l("footer",$e,[e("div",Me,[e("div",je,[e("div",Ge,[H(" © "+k(new Date().getFullYear())+", made with ",1),n[0]||(n[0]=e("span",{class:"text-danger"},[e("i",{class:"tf-icons ri-heart-fill"})],-1)),n[1]||(n[1]=H(" by ")),n[2]||(n[2]=e("a",{href:"#",target:"_blank",class:"footer-link"},"Kainnova Digital Solutions",-1))]),n[3]||(n[3]=E('<div class="d-none d-lg-inline-block" data-v-a6ec397a><a href="https://themeforest.net/licenses/standard" class="footer-link me-4" target="_blank" data-v-a6ec397a>License</a><a href="https://1.envato.market/pixinvent_portfolio" target="_blank" class="footer-link me-4" data-v-a6ec397a>More Themes</a><a href="https://demos.pixinvent.com/materialize-html-admin-template/documentation/" target="_blank" class="footer-link me-4" data-v-a6ec397a>Documentation</a><a href="https://pixinvent.ticksy.com/" target="_blank" class="footer-link d-none d-sm-inline-block" data-v-a6ec397a>Support</a></div>',1))])])]))}},Ae=oe(De,[["__scopeId","data-v-a6ec397a"]]),Ee={class:"layout-wrapper layout-content-navbar"},Ne={class:"layout-container"},Fe={class:"layout-page"},Be={class:"content-wrapper"},Pe={class:"container-xxl flex-grow-1 container-p-y"},Ie={__name:"default",setup($){const d=N();return F(()=>{d.initializeLayout()}),(n,c)=>(r(),l("div",Ee,[e("div",Ne,[_(ge),c[1]||(c[1]=e("div",{class:"layout-overlay layout-menu-toggle"},null,-1)),e("div",Fe,[_(Le),e("div",Be,[e("div",Pe,[ie(n.$slots,"default")]),_(Ae),c[0]||(c[0]=e("div",{class:"content-backdrop fade"},null,-1))])])])]))}};export{Ie as default};

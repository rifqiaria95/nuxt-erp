import{j as p,s as F,k as D,g as A,l as k,c as m,a as s,b as l,i as t,w as v,o as u,q as H,v as q,E as f,n as b,d as g,z,A as J,B as O}from"./Bkm6qw8b.js";import{_ as G}from"./mvyRji1Y.js";import{_ as I}from"./BAMzpvu1.js";import{_ as K}from"./DleeVanq.js";import{u as Q}from"./vvEwlCZi.js";import{u as W}from"./VXGyPOT6.js";import{u as X}from"./Ca1Fz0tn.js";import{u as Y}from"./u26IMBn3.js";import{u as Z}from"./CI-DMe-d.js";import"./9Qm2jZ7z.js";const ss={class:"content-wrapper"},is={class:"container-xxl flex-grow-1 container-p-y"},ts={class:"row g-6 mb-6"},es={class:"col-xl-4 col-lg-6 col-md-6"},os={class:"card h-100"},as={class:"row h-100"},ns={class:"col-sm-7"},ls={class:"card-body text-sm-end text-center ps-sm-0"},rs={class:"row g-6"},ds={class:"col-12"},ms={class:"card"},us={class:"card-header d-flex justify-content-between align-items-center flex-wrap"},cs={class:"d-flex align-items-center me-3 mb-2 mb-md-0"},ps={class:"d-flex align-items-center"},vs={class:"p-input-icon-left"},fs={class:"card-datatable table-responsive py-3 px-3"},bs={class:"d-inline-block"},gs={class:"dropdown-menu"},_s={key:0},ws=["onClick"],hs={key:1},ys=["onClick"],Ds={class:"row g-4"},ks={class:"col-md-12"},xs={class:"form-floating form-floating-outline"},Ps={class:"modal-footer mt-6"},Ms=["disabled"],Ss={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},Fs={__name:"divisi",setup(Cs){const x=p(null),o=Q(),P=W(),M=Y(),{userHasPermission:_,userHasRole:w}=X(),{divisis:S,loading:c,totalRecords:C,params:r,form:h,isEditMode:y,showModal:T,validationErrors:V}=F(o),d=p(""),R=p([10,25,50,100]),$=D(()=>y.value?"Edit Divisi":"Tambah Divisi"),E=D(()=>y.value?"Ubah detail divisi.":"Isi untuk menambah divisi baru.");let n=null;A(()=>{o.fetchDivisis(),P.fetchPermissions(),M.loadUser();const a=document.getElementById("DivisiModal");a&&(n=new bootstrap.Modal(a))}),k(T,a=>{a?n==null||n.show():n==null||n.hide()});const L=Z(()=>{o.setSearch(d.value)},500);k(d,L);const B=a=>o.setPagination(a),N=()=>{r.value.first=0,o.fetchDivisis()},j=a=>o.setSort(a);return(a,i)=>(u(),m("div",ss,[s("div",is,[i[18]||(i[18]=s("h4",{class:"mb-1"},"List Divisi",-1)),i[19]||(i[19]=s("p",{class:"mb-6"}," List divisi yang terdaftar di sistem ",-1)),s("div",ts,[s("div",es,[s("div",os,[s("div",as,[i[9]||(i[9]=s("div",{class:"col-sm-5"},[s("div",{class:"d-flex align-items-end h-100 justify-content-center"},[s("img",{src:G,class:"img-fluid",alt:"Image",width:"70"})])],-1)),s("div",ns,[s("div",ls,[s("button",{onClick:i[0]||(i[0]=e=>t(o).openModal()),class:"btn btn-primary mb-2 text-nowrap add-new-role"}," Tambah Divisi "),i[8]||(i[8]=s("p",{class:"mb-0 mt-1"},"Buat Divisi baru",-1))])])])])])]),s("div",rs,[i[15]||(i[15]=s("div",{class:"col-12"},[s("h4",{class:"mt-6 mb-1"},"Total Divisi"),s("p",{class:"mb-0"},"Find all of your company's administrator accounts and their associate Divisi.")],-1)),s("div",ds,[s("div",ms,[s("div",us,[s("div",cs,[i[10]||(i[10]=s("span",{class:"me-2"},"Baris:",-1)),l(t(H),{modelValue:t(r).rows,"onUpdate:modelValue":i[1]||(i[1]=e=>t(r).rows=e),options:R.value,onChange:N,placeholder:"Jumlah",style:{width:"8rem"}},null,8,["modelValue","options"])]),s("div",ps,[s("span",vs,[i[11]||(i[11]=s("i",{class:"ri-search-line"},null,-1)),l(t(q),{modelValue:d.value,"onUpdate:modelValue":i[2]||(i[2]=e=>d.value=e),placeholder:"Cari Divisi...",class:"w-full md:w-20rem"},null,8,["modelValue"])])])]),s("div",fs,[l(K,{ref_key:"myDataTableRef",ref:x,data:t(S),rows:t(r).rows,loading:t(c),totalRecords:t(C),lazy:!0,onPage:i[3]||(i[3]=e=>B(e)),onSort:i[4]||(i[4]=e=>j(e)),paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink",currentPageReportTemplate:"Menampilkan {first} sampai {last} dari {totalRecords} data"},{default:v(()=>[l(t(f),{field:"id",header:"#",sortable:!0}),l(t(f),{field:"nmDivisi",header:"Nama Divisi",sortable:!0}),l(t(f),{header:"Actions",exportable:!1,style:{"min-width":"8rem"}},{body:v(e=>[s("div",bs,[i[14]||(i[14]=s("a",{href:"javascript:;",class:"btn btn-sm btn-text-secondary rounded-pill btn-icon dropdown-toggle hide-arrow","data-bs-toggle":"dropdown"},[s("i",{class:"ri-more-2-fill"})],-1)),s("ul",gs,[t(w)("superadmin")||t(_)("edit_divisi")?(u(),m("li",_s,[s("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:U=>t(o).openModal(e.data,"admin")},i[12]||(i[12]=[s("i",{class:"ri-edit-box-line me-2"},null,-1),g(" Edit ")]),8,ws)])):b("",!0),t(w)("superadmin")||t(_)("delete_divisi")?(u(),m("li",hs,[s("a",{class:"dropdown-item text-danger",href:"javascript:void(0)",onClick:U=>t(o).deleteDivisi(e.data.id)},i[13]||(i[13]=[s("i",{class:"ri-delete-bin-7-line me-2"},null,-1),g(" Hapus ")]),8,ys)])):b("",!0)])])]),_:1})]),_:1},8,["data","rows","loading","totalRecords"])])])])]),l(I,{id:"DivisiModal",title:$.value,description:E.value,"validation-errors-from-parent":t(V)},{default:v(()=>[s("form",{onSubmit:i[7]||(i[7]=z(e=>t(o).saveDivisi(),["prevent"]))},[s("div",Ds,[s("div",ks,[s("div",xs,[J(s("input",{type:"text",class:"form-control","onUpdate:modelValue":i[5]||(i[5]=e=>t(h).nmDivisi=e),placeholder:"Masukkan nama divisi",required:""},null,512),[[O,t(h).nmDivisi]]),i[16]||(i[16]=s("label",null,"Nama Divisi",-1))])])]),s("div",Ps,[s("button",{type:"button",class:"btn btn-outline-secondary",onClick:i[6]||(i[6]=e=>t(o).closeModal())},"Tutup"),s("button",{type:"submit",class:"btn btn-primary",disabled:t(c)},[t(c)?(u(),m("span",Ss)):b("",!0),i[17]||(i[17]=g(" Simpan "))],8,Ms)])],32)]),_:1},8,["title","description","validation-errors-from-parent"])]),i[20]||(i[20]=s("div",{class:"content-backdrop fade"},null,-1))]))}};export{Fs as default};

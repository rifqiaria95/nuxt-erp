import{_ as X,j as x,s as w,k as h,g as Z,l as D,c,a as e,b as i,i as s,F as tt,d,w as u,o as m,q as et,v as ot,E as r,t as g,y as st,z as at,A as b,B as v,G as lt,n as it,I as nt}from"./Bkm6qw8b.js";import{_ as rt}from"./mvyRji1Y.js";import{_ as dt}from"./X_GiR0ue.js";import{u as ut}from"./CGIrALZn.js";import{u as ct}from"./B7H6Ax0s.js";import{u as mt}from"./Bn3XTIwX.js";import{_ as pt}from"./BAMzpvu1.js";import{_ as ft}from"./DleeVanq.js";import{C as S}from"./D9zIpW-x.js";import{u as bt}from"./D29843uf.js";import{u as gt}from"./CI-DMe-d.js";import"./9Qm2jZ7z.js";const vt={class:"content-wrapper"},kt={class:"container-xxl flex-grow-1 container-p-y"},yt={key:0},_t={key:0},ht={class:"row g-6 mb-6"},xt={class:"col-xl-4 col-lg-6 col-md-6"},wt={class:"card h-100"},St={class:"row h-100"},Pt={class:"col-sm-7"},Mt={class:"card-body text-sm-end text-center ps-sm-0"},Vt={class:"row g-6"},Ct={class:"col-12"},Bt={class:"card"},Ut={class:"card-header d-flex justify-content-between align-items-center flex-wrap"},Rt={class:"d-flex align-items-center me-3 mb-2 mb-md-0"},Tt={class:"d-flex align-items-center"},$t={class:"btn-group me-2"},Lt={class:"dropdown-menu"},Dt={class:"input-group"},Et={class:"p-input-icon-left"},Ft={class:"card-datatable table-responsive py-3 px-3"},It={key:0},Nt=["src"],jt={key:1},qt=["onClick"],Kt=["onClick"],Ht={key:1,class:"text-center"},zt={class:"d-flex flex-column align-items-center"},At={class:"row g-6"},Gt={class:"col-md-6"},Jt={class:"form-floating form-floating-outline"},Ot={class:"col-md-6"},Wt={class:"form-floating form-floating-outline"},Yt={class:"col-md-6"},Qt={class:"form-floating form-floating-outline"},Xt={class:"col-md-6"},Zt={class:"form-floating form-floating-outline"},te={class:"col-md-3"},ee={class:"form-floating form-floating-outline"},oe={class:"col-md-3"},se={class:"form-floating form-floating-outline"},ae={class:"col-md-6"},le={class:"form-floating form-floating-outline"},ie={class:"col-md-6"},ne={class:"form-floating form-floating-outline"},re={class:"col-md-6"},de={class:"form-check form-switch mt-3 d-flex align-items-center"},ue={class:"col-md-12"},ce={class:"form-floating form-floating-outline"},me={class:"modal-footer mt-6"},pe=["disabled"],fe={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},be={__name:"product",setup(ge){const P=nt(),k=bt(),M=x(null),n=ut(),V=ct(),C=mt(),{products:B,loading:y,totalRecords:E,params:f,form:l,isEditMode:U,showModal:F,validationErrors:I}=w(n),{kategori:N}=w(V),{units:j}=w(C),_=x(""),q=x([10,25,50,100]),K=h(()=>U.value?"Edit Product":"Tambah Product"),H=h(()=>U.value?"Silakan ubah data product di bawah ini.":"Silakan isi form di bawah ini untuk menambahkan product baru."),R=h({get(){return l.value.priceBuy?k(l.value.priceBuy):""},set(a){l.value.priceBuy=a.replace(/[^0-9]/g,"")}}),T=h({get(){return l.value.priceSell?k(l.value.priceSell):""},set(a){l.value.priceSell=a.replace(/[^0-9]/g,"")}}),z=[{label:"Baru",value:"baru"},{label:"Bekas",value:"bekas"},{label:"Rusak",value:"rusak"},{label:"Servis",value:"servis"}],A=a=>!a||typeof a!="string"?null:a.startsWith("http")||!P.public.apiBase?a:`${new URL(P.public.apiBase).origin}/${a}`;let p=null;Z(()=>{n.fetchProducts(),V.fetchKategori(),C.fetchUnit();const a=document.getElementById("ProductModal");a&&(p=new bootstrap.Modal(a))}),D(F,a=>{a?p==null||p.show():p==null||p.hide()});const G=gt(()=>{n.setSearch(_.value)},500);D(_,G);const J=a=>n.setPagination(a),O=()=>{f.value.first=0,n.fetchProducts()},W=a=>n.setSort(a),$=a=>{a==="csv"&&M.value.exportCSV()};function Y(a){const t=a.target.files[0];t&&n.handleImageChange(t)}const L=a=>{switch(a){case!0:return{text:"Ya",class:"badge rounded-pill bg-label-primary"};case!1:return{text:"Tidak",class:"badge rounded-pill bg-label-danger"};default:return{text:"-",class:"badge rounded-pill bg-label-light"}}};return(a,t)=>(m(),c("div",vt,[e("div",kt,[s(y)?(m(),c("div",yt,t[20]||(t[20]=[e("div",{class:"animate-pulse space-y-2"},[e("div",{class:"h-6 bg-gray-200 rounded"}),e("div",{class:"h-6 bg-gray-200 rounded w-1/2"})],-1)]))):(m(),c(tt,{key:1},[s(B).length>0?(m(),c("div",_t,[t[28]||(t[28]=e("h4",{class:"mb-1"},"List Product",-1)),t[29]||(t[29]=e("p",{class:"mb-6"}," List product yang terdaftar di sistem ",-1)),e("div",ht,[e("div",xt,[e("div",wt,[e("div",St,[t[22]||(t[22]=e("div",{class:"col-sm-5"},[e("div",{class:"d-flex align-items-end h-100 justify-content-center"},[e("img",{src:rt,class:"img-fluid",alt:"Image",width:"70"})])],-1)),e("div",Pt,[e("div",Mt,[e("button",{onClick:t[0]||(t[0]=o=>s(n).openModal()),class:"btn btn-primary mb-2 text-nowrap add-new-role"}," Tambah Product "),t[21]||(t[21]=e("p",{class:"mb-0 mt-1"},"Buat Product baru",-1))])])])])])]),e("div",Vt,[e("div",Ct,[e("div",Bt,[e("div",Ut,[e("div",Rt,[t[23]||(t[23]=e("span",{class:"me-2"},"Baris:",-1)),i(s(et),{modelValue:s(f).rows,"onUpdate:modelValue":t[1]||(t[1]=o=>s(f).rows=o),options:q.value,onChange:O,placeholder:"Jumlah",style:{width:"8rem"}},null,8,["modelValue","options"])]),e("div",Tt,[e("div",$t,[t[24]||(t[24]=e("button",{class:"btn btn-secondary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("i",{class:"ri-upload-2-line me-1"}),d(" Export ")],-1)),e("ul",Lt,[e("li",null,[e("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:t[2]||(t[2]=o=>$("csv"))},"CSV")]),e("li",null,[e("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:t[3]||(t[3]=o=>$("pdf"))},"PDF")])])]),e("div",Dt,[e("span",Et,[i(s(ot),{modelValue:_.value,"onUpdate:modelValue":t[4]||(t[4]=o=>_.value=o),placeholder:"Cari product...",class:"w-full md:w-20rem"},null,8,["modelValue"])])])])]),e("div",Ft,[i(ft,{ref_key:"myDataTableRef",ref:M,data:s(B),rows:s(f).rows,loading:s(y),totalRecords:s(E),lazy:!0,"sort-field":s(f).sortField,"sort-order":s(f).sortOrder,"sort-mode":"single",onPage:t[5]||(t[5]=o=>J(o)),onSort:t[6]||(t[6]=o=>W(o)),responsiveLayout:"scroll",paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink",currentPageReportTemplate:"Menampilkan {first} sampai {last} dari {totalRecords} data"},{default:u(()=>[i(s(r),{field:"id",header:"#",sortable:!0}),i(s(r),{field:"image",header:"Gambar",sortable:!0},{body:u(o=>[o.data.image?(m(),c("div",It,[e("img",{src:A(o.data.image),alt:"Logo",style:{height:"40px","max-width":"80px","object-fit":"contain"}},null,8,Nt)])):(m(),c("div",jt,t[25]||(t[25]=[e("span",{class:"text-muted"},"Tidak ada image",-1)])))]),_:1}),i(s(r),{field:"sku",header:"No. Product",sortable:!0}),i(s(r),{field:"name",header:"Nama Product",sortable:!0}),i(s(r),{field:"unit.name",header:"Satuan",sortable:!0}),i(s(r),{field:"stockMin",header:"Stok Minimum",sortable:!0},{body:u(o=>[d(g(Math.round(o.data.stockMin)),1)]),_:1}),i(s(r),{field:"priceBuy",header:"Harga Beli",sortable:!0},{body:u(o=>[d(g(o.data.priceBuy?s(k)(o.data.priceBuy):"-"),1)]),_:1}),i(s(r),{field:"priceSell",header:"Harga Jual",sortable:!0},{body:u(o=>[d(g(o.data.priceSell?s(k)(o.data.priceSell):"-"),1)]),_:1}),i(s(r),{field:"isService",header:"Service",sortable:!0},{body:u(o=>[e("span",{class:st(L(o.data.isService).class)},g(L(o.data.isService).text),3)]),_:1}),i(s(r),{header:"Kategori",field:"category.name",sortable:!0},{body:u(o=>[d(g(o.data.category&&o.data.category.name?o.data.category.name:"-"),1)]),_:1}),i(s(r),{header:"Actions",exportable:!1,style:{"min-width":"8rem"}},{body:u(o=>[e("button",{onClick:Q=>s(n).openModal(o.data),class:"btn btn-sm btn-icon btn-text-secondary rounded-pill btn-icon me-2"},t[26]||(t[26]=[e("i",{class:"ri-edit-box-line"},null,-1)]),8,qt),e("button",{onClick:Q=>s(n).deleteProduct(o.data.id),class:"btn btn-sm btn-icon btn-text-secondary rounded-pill btn-icon"},t[27]||(t[27]=[e("i",{class:"ri-delete-bin-7-line"},null,-1)]),8,Kt)]),_:1})]),_:1},8,["data","rows","loading","totalRecords","sort-field","sort-order"])])])])])])):(m(),c("div",Ht,[e("div",zt,[t[31]||(t[31]=e("img",{src:dt,alt:"page-misc-under-maintenance",width:"300",class:"img-fluid"},null,-1)),t[32]||(t[32]=e("h4",{class:"mt-4"},"Tidak ada data Product",-1)),t[33]||(t[33]=e("p",{class:"mb-4"},[d(" Saat ini belum ada data product yang tersedia."),e("br"),d(" Silakan buat product baru untuk memulai. ")],-1)),e("button",{onClick:t[7]||(t[7]=o=>s(n).openModal()),class:"btn btn-primary"},t[30]||(t[30]=[e("i",{class:"ri-add-line me-1"},null,-1),d(" Tambah Product ")]))])]))],64)),i(pt,{id:"ProductModal",title:K.value,description:H.value,"validation-errors-from-parent":s(I)},{default:u(()=>[e("form",{onSubmit:t[19]||(t[19]=at(o=>s(n).saveProduct(),["prevent"]))},[e("div",At,[e("div",Gt,[e("div",Jt,[b(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[8]||(t[8]=o=>s(l).sku=o),placeholder:"Masukkan sku product",required:""},null,512),[[v,s(l).sku]]),t[34]||(t[34]=e("label",null,"Kode Product",-1))])]),e("div",Ot,[e("div",Wt,[b(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[9]||(t[9]=o=>s(l).name=o),placeholder:"Masukkan nama product",required:""},null,512),[[v,s(l).name]]),t[35]||(t[35]=e("label",null,"Nama Product",-1))])]),e("div",Yt,[e("div",Qt,[b(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[10]||(t[10]=o=>s(l).stockMin=o),placeholder:"Masukkan stok minimum product",onInput:t[11]||(t[11]=o=>s(l).stockMin=o.target.value.replace(/[^0-9]/g,"")),inputmode:"numeric",pattern:"[0-9]*",required:""},null,544),[[v,s(l).stockMin]]),t[36]||(t[36]=e("label",null,"Stok Minimum Product",-1))])]),e("div",Xt,[e("div",Zt,[i(s(S),{modelValue:s(l).unitId,"onUpdate:modelValue":t[12]||(t[12]=o=>s(l).unitId=o),options:s(j),label:"name",reduce:o=>o.id,placeholder:"-- Pilih Satuan --",class:"unit"},null,8,["modelValue","options","reduce"])])]),e("div",te,[e("div",ee,[b(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[13]||(t[13]=o=>R.value=o),placeholder:"Masukkan harga beli product",required:""},null,512),[[v,R.value]]),t[37]||(t[37]=e("label",null,"Harga Beli Product",-1))])]),e("div",oe,[e("div",se,[b(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[14]||(t[14]=o=>T.value=o),placeholder:"Masukkan harga jual product",required:""},null,512),[[v,T.value]]),t[38]||(t[38]=e("label",null,"Harga Jual Product",-1))])]),e("div",ae,[e("div",le,[i(s(S),{modelValue:s(l).categoryId,"onUpdate:modelValue":t[15]||(t[15]=o=>s(l).categoryId=o),options:s(N),label:"name",reduce:o=>o.id,placeholder:"-- Pilih Kategori --",class:"kategori"},null,8,["modelValue","options","reduce"])])]),e("div",ie,[e("div",ne,[i(s(S),{modelValue:s(l).kondisi,"onUpdate:modelValue":t[16]||(t[16]=o=>s(l).kondisi=o),options:z,label:"label",reduce:o=>o.value,"get-option-key":o=>o.value,placeholder:"-- Pilih Kondisi --",id:"select-kondisi",class:"select-kondisi"},null,8,["modelValue","reduce","get-option-key"])])]),e("div",re,[e("div",de,[b(e("input",{class:"form-check-input me-2",type:"checkbox","onUpdate:modelValue":t[17]||(t[17]=o=>s(l).isService=o)},null,512),[[lt,s(l).isService]]),t[39]||(t[39]=e("label",{class:"form-check-label mb-0"}," Service Product ",-1))])]),e("div",ue,[e("div",ce,[e("input",{type:"file",class:"form-control",onChange:Y,placeholder:"Masukkan image product"},null,32),t[40]||(t[40]=e("label",null,"Gambar Product",-1))])])]),e("div",me,[e("button",{type:"button",class:"btn btn-outline-secondary",onClick:t[18]||(t[18]=o=>s(n).closeModal())},"Tutup"),e("button",{type:"submit",class:"btn btn-primary",disabled:s(y)},[s(y)?(m(),c("span",fe)):it("",!0),t[41]||(t[41]=d(" Simpan "))],8,pe)])],32)]),_:1},8,["title","description","validation-errors-from-parent"])]),t[42]||(t[42]=e("div",{class:"content-backdrop fade"},null,-1))]))}},Be=X(be,[["__scopeId","data-v-c13d3734"]]);export{Be as default};

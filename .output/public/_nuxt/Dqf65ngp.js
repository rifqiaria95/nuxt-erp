import{_ as O,f as J,s as w,j as C,k as V,g as G,l as T,c as r,a as t,b as d,h as Q,i as s,w as u,o as f,q as W,v as X,E as c,d as v,t as j,n as y,z as Y,A as b,B as x,F as Z,x as aa,J as ta}from"./Bkm6qw8b.js";import{_ as sa,a as ea,b as A,c as oa,d as la}from"./BrFEKIuM.js";import{_ as ia}from"./mvyRji1Y.js";import{u as da}from"./Bmp6y9tu.js";import{u as na}from"./DD8T_SWG.js";import{u as ra}from"./VXGyPOT6.js";import{u as fa}from"./Ca1Fz0tn.js";import{_ as ca}from"./BAMzpvu1.js";import{_ as pa}from"./DleeVanq.js";import"./9Qm2jZ7z.js";import{u as ma}from"./u26IMBn3.js";import{u as ua}from"./CI-DMe-d.js";const va={class:"content-wrapper"},ba={class:"container-xxl flex-grow-1 container-p-y"},ga={class:"row g-6"},ha={class:"col-xl-4 col-lg-6 col-md-6"},_a={class:"card h-100"},wa={class:"row h-100"},Ca={class:"col-7"},ya={class:"card-body text-sm-end text-center ps-sm-0"},xa={class:"col-12"},ka={class:"card"},Pa={class:"card-header d-flex justify-content-between align-items-center flex-wrap"},Ma={class:"d-flex align-items-center me-3 mb-2 mb-md-0"},Sa={class:"d-flex align-items-center"},Va={class:"p-input-icon-left"},Ta={class:"card-datatable table-responsive py-3 px-3"},ja={class:"d-inline-block"},Aa={class:"dropdown-menu"},Ra={key:0},Na=["onClick"],Ua={key:1},$a=["onClick"],Fa={class:"row g-4"},Ia={class:"col-md-6"},La={class:"form-floating form-floating-outline"},Ea={class:"col-md-6"},Da={class:"form-floating form-floating-outline"},Ka={class:"col-12"},Ba={class:"form-floating form-floating-outline"},qa={class:"col-12"},za={class:"form-floating form-floating-outline"},Ha=["value"],Oa={class:"modal-footer mt-6"},Ja=["disabled"],Ga={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},Qa={__name:"cabang",setup(Wa){const{$api:Xa}=J(),o=da(),k=na(),P=ra(),R=ma(),{userHasPermission:M,userHasRole:S}=fa(),{cabangs:N,loading:g,totalRecords:U,params:l,form:n,isEditMode:h,showModal:$,validationErrors:F}=w(o),{perusahaans:I}=w(k),{permissions:Ya}=w(P),L=C(null),p=C(""),E=V(()=>h.value?"Edit Cabang":"Tambah Cabang"),D=V(()=>h.value?"Ubah detail cabang di bawah ini.":"Isi detail cabang baru di bawah ini."),_=C(null);G(()=>{o.fetchCabangs(),k.fetchPerusahaans(),P.fetchPermissions(),R.loadUser();const i=document.getElementById("CabangModal");i&&(_.value=new bootstrap.Modal(i))}),T($,i=>{var a,e;i?(a=_.value)==null||a.show():(e=_.value)==null||e.hide()});const K=async()=>{h.value?await o.updateCabang():await o.createCabang()},B=i=>{l.value.page=i.page+1,l.value.rows=i.rows,o.fetchCabangs()},q=i=>{l.value.sortField=i.sortField,l.value.sortOrder=i.sortOrder,o.fetchCabangs()},z=()=>{l.value.page=1,o.fetchCabangs()},H=ua(()=>{l.value.page=1,l.value.filters={global:{value:p.value}},o.setFilters(l.value.filters)},500);return T(p,()=>{H()}),(i,a)=>(f(),r("div",va,[t("div",ba,[a[24]||(a[24]=t("h4",{class:"mb-1"},"List Cabang",-1)),a[25]||(a[25]=t("p",{class:"mb-6"}," List cabang yang terdaftar di sistem ",-1)),t("div",ga,[a[16]||(a[16]=Q('<div class="col-xl-4 col-lg-6 col-md-6" data-v-ff54897f><div class="card" data-v-ff54897f><div class="card-body" data-v-ff54897f><div class="d-flex justify-content-between align-items-center mb-4" data-v-ff54897f><p class="mb-0" data-v-ff54897f>Total 3 users</p><ul class="list-unstyled d-flex align-items-center avatar-group mb-0" data-v-ff54897f><li data-bs-toggle="tooltip" data-popup="tooltip-custom" data-bs-placement="top" title="Kim Karlos" class="avatar pull-up" data-v-ff54897f><img class="rounded-circle" src="'+sa+'" alt="Avatar" data-v-ff54897f></li><li data-bs-toggle="tooltip" data-popup="tooltip-custom" data-bs-placement="top" title="Katy Turner" class="avatar pull-up" data-v-ff54897f><img class="rounded-circle" src="'+ea+'" alt="Avatar" data-v-ff54897f></li><li data-bs-toggle="tooltip" data-popup="tooltip-custom" data-bs-placement="top" title="Peter Adward" class="avatar pull-up" data-v-ff54897f><img class="rounded-circle" src="'+A+'" alt="Avatar" data-v-ff54897f></li><li class="avatar" data-v-ff54897f><span class="avatar-initial rounded-circle pull-up bg-lighter text-body" data-bs-toggle="tooltip" data-bs-placement="bottom" title="3 more" data-v-ff54897f>+3</span></li></ul></div><div class="d-flex justify-content-between align-items-center" data-v-ff54897f><div class="pegawai-heading" data-v-ff54897f><h5 class="mb-1" data-v-ff54897f>Support</h5><a href="javascript:;" data-bs-toggle="modal" data-bs-target="#PegawaiModal" class="pegawai-edit-modal" data-v-ff54897f></a></div><a href="javascript:void(0);" class="text-secondary" data-v-ff54897f><i class="ri-file-copy-line ri-22px" data-v-ff54897f></i></a></div></div></div></div><div class="col-xl-4 col-lg-6 col-md-6" data-v-ff54897f><div class="card" data-v-ff54897f><div class="card-body" data-v-ff54897f><div class="d-flex justify-content-between align-items-center mb-4" data-v-ff54897f><p class="mb-0" data-v-ff54897f>Total 2 users</p><ul class="list-unstyled d-flex align-items-center avatar-group mb-0" data-v-ff54897f><li data-bs-toggle="tooltip" data-popup="tooltip-custom" data-bs-placement="top" title="Kim Merchent" class="avatar pull-up" data-v-ff54897f><img class="rounded-circle" src="'+oa+'" alt="Avatar" data-v-ff54897f></li><li data-bs-toggle="tooltip" data-popup="tooltip-custom" data-bs-placement="top" title="Sam D&#39;souza" class="avatar pull-up" data-v-ff54897f><img class="rounded-circle" src="'+la+'" alt="Avatar" data-v-ff54897f></li><li data-bs-toggle="tooltip" data-popup="tooltip-custom" data-bs-placement="top" title="Nurvi Karlos" class="avatar pull-up" data-v-ff54897f><img class="rounded-circle" src="'+A+'" alt="Avatar" data-v-ff54897f></li><li class="avatar" data-v-ff54897f><span class="avatar-initial rounded-circle pull-up bg-lighter text-body" data-bs-toggle="tooltip" data-bs-placement="bottom" title="3 more" data-v-ff54897f>+3</span></li></ul></div><div class="d-flex justify-content-between align-items-center" data-v-ff54897f><div class="pegawai-heading" data-v-ff54897f><h5 class="mb-1" data-v-ff54897f>Restricted User</h5><a href="javascript:;" data-bs-toggle="modal" data-bs-target="#PegawaiModal" class="pegawai-edit-modal" data-v-ff54897f></a></div><a href="javascript:void(0);" class="text-secondary" data-v-ff54897f><i class="ri-file-copy-line ri-22px" data-v-ff54897f></i></a></div></div></div></div>',2)),t("div",ha,[t("div",_a,[t("div",wa,[a[10]||(a[10]=t("div",{class:"col-5"},[t("div",{class:"d-flex align-items-end h-100 justify-content-center"},[t("img",{src:ia,class:"img-fluid",alt:"Image",width:"68"})])],-1)),t("div",Ca,[t("div",ya,[t("button",{class:"btn btn-sm btn-primary mb-4 text-nowrap",onClick:a[0]||(a[0]=e=>s(o).openModal())}," Tambah Cabang ")])])])])]),a[17]||(a[17]=t("div",{class:"col-12"},[t("h4",{class:"mt-6 mb-1"},"Total Cabang"),t("p",{class:"mb-0"},"Find all of your company's administrator accounts and their associate Cabang.")],-1)),t("div",xa,[t("div",ka,[t("div",Pa,[t("div",Ma,[a[11]||(a[11]=t("span",{class:"me-2"},"Baris:",-1)),d(s(W),{modelValue:s(l).rows,"onUpdate:modelValue":a[1]||(a[1]=e=>s(l).rows=e),options:[5,10,20,50],onChange:z,style:{width:"8rem"}},null,8,["modelValue"])]),t("div",Sa,[t("span",Va,[a[12]||(a[12]=t("i",{class:"ri-search-line"},null,-1)),d(s(X),{modelValue:p.value,"onUpdate:modelValue":a[2]||(a[2]=e=>p.value=e),placeholder:"Cari cabang...",class:"w-full md:w-20rem"},null,8,["modelValue"])])])]),t("div",Ta,[d(pa,{ref_key:"myDataTableRef",ref:L,data:s(N),rows:s(l).rows,loading:s(g),totalRecords:s(U),lazy:!0,onPage:a[3]||(a[3]=e=>B(e)),onSort:a[4]||(a[4]=e=>q(e)),paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink",currentPageReportTemplate:"Menampilkan {first} sampai {last} dari {totalRecords} data"},{default:u(()=>[d(s(c),{field:"id",header:"#",sortable:!0}),d(s(c),{field:"kodeCabang",header:"Kode Cabang",sortable:!0}),d(s(c),{field:"nmCabang",header:"Nama Cabang",sortable:!0}),d(s(c),{field:"alamatCabang",header:"Alamat",sortable:!0}),d(s(c),{header:"Perusahaan",sortable:!0,field:"perusahaan.nmPerusahaan"},{body:u(e=>{var m;return[v(j(((m=e.data.perusahaan)==null?void 0:m.nmPerusahaan)||"-"),1)]}),_:1}),d(s(c),{header:"Actions",exportable:!1,style:{"min-width":"8rem"}},{body:u(e=>[t("div",ja,[a[15]||(a[15]=t("a",{href:"javascript:;",class:"btn btn-sm btn-text-secondary rounded-pill btn-icon dropdown-toggle hide-arrow","data-bs-toggle":"dropdown"},[t("i",{class:"ri-more-2-fill"})],-1)),t("ul",Aa,[s(S)("superadmin")||s(M)("edit_cabang")?(f(),r("li",Ra,[t("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:m=>s(o).openModal(e.data,"admin")},a[13]||(a[13]=[t("i",{class:"ri-edit-box-line me-2"},null,-1),v(" Edit ")]),8,Na)])):y("",!0),s(S)("superadmin")||s(M)("delete_cabang")?(f(),r("li",Ua,[t("a",{class:"dropdown-item text-danger",href:"javascript:void(0)",onClick:m=>s(o).deleteCabang(e.data.id)},a[14]||(a[14]=[t("i",{class:"ri-delete-bin-7-line me-2"},null,-1),v(" Hapus ")]),8,$a)])):y("",!0)])])]),_:1})]),_:1},8,["data","rows","loading","totalRecords"])])])])]),d(ca,{id:"CabangModal",title:E.value,description:D.value,"validation-errors-from-parent":s(F)},{default:u(()=>[t("form",{onSubmit:Y(K,["prevent"])},[t("div",Fa,[t("div",Ia,[t("div",La,[b(t("input",{type:"text",class:"form-control",id:"kodeCabang","onUpdate:modelValue":a[5]||(a[5]=e=>s(n).kodeCabang=e),placeholder:"Masukkan kode cabang",required:""},null,512),[[x,s(n).kodeCabang]]),a[18]||(a[18]=t("label",{for:"kodeCabang"},"Kode Cabang",-1))])]),t("div",Ea,[t("div",Da,[b(t("input",{type:"text",class:"form-control",id:"nmCabang","onUpdate:modelValue":a[6]||(a[6]=e=>s(n).nmCabang=e),placeholder:"Masukkan nama cabang",required:""},null,512),[[x,s(n).nmCabang]]),a[19]||(a[19]=t("label",{for:"nmCabang"},"Nama Cabang",-1))])]),t("div",Ka,[t("div",Ba,[b(t("textarea",{class:"form-control h-100",id:"alamatCabang","onUpdate:modelValue":a[7]||(a[7]=e=>s(n).alamatCabang=e),placeholder:"Masukkan alamat lengkap",rows:"4"},null,512),[[x,s(n).alamatCabang]]),a[20]||(a[20]=t("label",{for:"alamatCabang"},"Alamat",-1))])]),t("div",qa,[t("div",za,[b(t("select",{id:"perusahaanId",class:"form-select","onUpdate:modelValue":a[8]||(a[8]=e=>s(n).perusahaanId=e),required:""},[a[21]||(a[21]=t("option",{value:"",disabled:""},"Pilih Perusahaan",-1)),(f(!0),r(Z,null,aa(s(I),e=>(f(),r("option",{key:e.id,value:e.id},j(e.nmPerusahaan),9,Ha))),128))],512),[[ta,s(n).perusahaanId]]),a[22]||(a[22]=t("label",{for:"perusahaanId"},"Perusahaan",-1))])])]),t("div",Oa,[t("button",{type:"button",class:"btn btn-outline-secondary",onClick:a[9]||(a[9]=e=>s(o).closeModal())},"Tutup"),t("button",{type:"submit",class:"btn btn-primary",disabled:s(g)},[s(g)?(f(),r("span",Ga)):y("",!0),a[23]||(a[23]=v(" Simpan "))],8,Ja)])],32)]),_:1},8,["title","description","validation-errors-from-parent"])]),a[26]||(a[26]=t("div",{class:"content-backdrop fade"},null,-1))]))}},ct=O(Qa,[["__scopeId","data-v-ff54897f"]]);export{ct as default};
